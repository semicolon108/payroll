(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calculate_overtime"],{"00b4":function(t,e,n){"use strict";n("ac1f");var a=n("23e7"),r=n("c65b"),s=n("1626"),c=n("825a"),o=n("577e"),i=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=/./.test;a({target:"RegExp",proto:!0,forced:!i},{test:function(t){var e=c(this),n=o(t),a=e.exec;if(!s(a))return r(u,e,n);var i=r(a,e,n);return null!==i&&(c(i),!0)}})},"01b8":function(t,e,n){},"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3");var a=n("6b75");function r(t,e){if(t){if("string"==typeof t)return Object(a["a"])(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a["a"])(t,e):void 0}}},"0919":function(t,e,n){"use strict";n("ee77")},"107c":function(t,e,n){"use strict";var a=n("d039"),r=n("cfe9"),s=r.RegExp;t.exports=a((function(){var t=s("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},"25f0":function(t,e,n){"use strict";var a=n("5e77").PROPER,r=n("cb2d"),s=n("825a"),c=n("577e"),o=n("d039"),i=n("90d8"),u="toString",l=RegExp.prototype,d=l[u],f=o((function(){return"/a/b"!==d.call({source:"a",flags:"b"})})),p=a&&d.name!==u;(f||p)&&r(l,u,(function(){var t=s(this),e=c(t.source),n=c(i(t));return"/"+e+"/"+n}),{unsafe:!0})},"3bcc":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"page-header"},[e("div",{staticClass:"header-start"},[t._m(0),e("div",{staticClass:"button-group"},[e("button",{staticClass:"button primary",on:{click:function(e){t.isUploadModal=!0}}},[t._v("Upload")]),e("button",{staticClass:"button grey",on:{click:t.clearOT}},[t._v("Clear Data")])])])]),e("div",{staticClass:"box"},[e("div",{staticClass:"box-header"},[t._m(1),e("div",{staticClass:"box-header-end"},[e("button",{staticClass:"button",class:{primary:t.showAmount},on:{click:function(e){t.showAmount=!t.showAmount}}},[t._v(" Show Amount (LAK) ")])])]),t._v(" "),t.isLoading?e("div",t._l(7,(function(t){return e("Loading",{key:t,staticClass:"mb-3",staticStyle:{height:"60px"}})})),1):e("table",{staticClass:"table is-fullwidth",attrs:{id:"my-table"}},[e("thead",[e("tr",[t._m(2),t._m(3),t._m(4),t._l(t.rates,(function(n){return e("th",{key:n,staticClass:"is-xs is-right"},[e("p",[t._v("OT Rate "+t._s(n))])])})),t._m(5)],2)]),e("tbody",t._l(t.emps,(function(n,a){return e("tr",{key:a},[e("td",[t._v(t._s(n.employeeCode))]),e("td",[t._v(" "+t._s(n.fullName)+" ")]),e("td",{staticClass:"is-right"},[e("p",[t._v(t._s(t._f("currency")(n.salary)))])]),t._l(t.rates,(function(a,r){return e("td",{key:r,staticClass:"is-right"},[e("span",[t._v(t._s(t.getByRate(n.OTHours,a,"hours")))]),t.showAmount?e("p",[t._v(t._s(t._f("currency")(t.getByRate(n.OTHours,a,"amount"))))]):t._e()])})),e("td",{staticClass:"is-right total"},[e("p",[t._v(t._s(t._f("currency")(n.total)))])])],2)})),0)])]),t.isUploadModal?e("Upload",{on:{CloseModal:function(e){t.isUploadModal=!1},UploadOT:function(e){t.isUploadModal=!1,t.getOTByMonth()}}}):t._e()],1)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header-title"},[e("h3",[t._v("Overtime")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"box-header-start"},[e("input",{staticClass:"input",attrs:{type:"text",placeholder:"Search employee"}})])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"is-xxs"},[e("span",[t._v("ID")])])},function(){var t=this,e=t._self._c;return e("th",[e("span",[t._v("Employee Name")])])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"is-right"},[e("span",[t._v("Basic Salary")])])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"is-sm is-right"},[e("p",[t._v("Total")])])}],s=n("5530"),c=n("c7eb"),o=n("1da1"),i=(n("d9e2"),n("7db0"),n("14d9"),n("e9f5"),n("f665"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("bf19"),n("9861"),n("88a7"),n("271a"),n("5494"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal is-active"},[e("div",{staticClass:"modal-background",on:{click:t.closeModal}}),e("div",{staticClass:"modal-card slide-down"},[e("div",{staticClass:"modal-card-head"},[e("h3",[t._v("Upload OT")]),e("p",[t._v("Please download to fill earning / deduction information")]),e("a",{staticClass:"template-file",on:{click:t.downloadTemplate}},[e("i",{staticClass:"fas fa-file-excel"}),t._v("Excel Template")]),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"upload-box"},[e("div",{staticClass:"upload"},[e("button",{staticClass:"button upload-btn",on:{click:function(e){return t.$refs.FileInput.click()}}},[t._v("Select File")]),t.hasFile?e("span",[t._v("Choosen")]):e("span",[t._v("File support Excel")]),e("input",{ref:"FileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.chooseFile}})]),e("input",{ref:"uploadFile",staticClass:"input is-hidden",attrs:{type:"file"}})])]),e("div",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button primary",on:{click:t.uploadOT}},[t._v("Save")])])])])}),u=[];function l(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d28b");function d(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,s,c,o=[],i=!0,u=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;i=!1}else for(;!(i=(a=s.call(n)).done)&&(o.push(a.value),o.length!==e);i=!0);}catch(t){u=!0,r=t}finally{try{if(!i&&null!=n["return"]&&(c=n["return"](),Object(c)!==c))return}finally{if(u)throw r}}return o}}var f=n("06c5");function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){return l(t)||d(t,e)||Object(f["a"])(t,e)||p()}n("4de4"),n("d81d"),n("910d"),n("ab43"),n("e9c4"),n("4fadc"),n("b64b");var b,v,m,y=n("2f62"),x=n("1146"),g=n.n(x),O=n("47b6"),w=n("8785"),_=n("5184"),j=Object(_["a"])(b||(b=Object(w["a"])(["\n\n    query(\n        $monthlyPaymentId: ID\n    ) {\n        getOTByMonth(\n            monthlyPaymentId: $monthlyPaymentId\n        ) {\n            fullName\n            employeeCode\n            salary\n            OTHours {\n                rate\n                hours\n                amount\n            }\n            total\n        }\n    }\n\n"]))),C=Object(_["a"])(v||(v=Object(w["a"])(["\n    mutation (\n        $info: UploadOTInput\n    ) {\n        uploadOT(info: $info)\n    }\n"]))),k=Object(_["a"])(m||(m=Object(w["a"])(["\n\nmutation (\n  $monthlyPaymentId: ID!\n) {\n  clearOT(monthlyPaymentId: $monthlyPaymentId)\n}\n\n"]))),T=function(t){return new Promise(function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(n,a){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O["a"].query({query:j,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.getOTByMonth),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},I=function(t){return new Promise(function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(n,a){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O["a"].mutate({mutation:C,variables:{info:t}});case 3:r=e.sent,n(r.data.uploadOT),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},$=function(t){return new Promise(function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(n,a){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O["a"].mutate({mutation:k,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.clearOT),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},E={components:{},data:function(){return{data:[],isChecker:!1,form:{},hasFile:!1}},computed:Object(s["a"])({},Object(y["c"])(["getToken"])),methods:{closeModal:function(){this.$emit("CloseModal")},downloadTemplate:function(){var t=this;return Object(o["a"])(Object(c["a"])().mark((function e(){var n,a,r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return t.$axios.defaults.headers["Authorization"]=t.getToken,e.next=6,t.$axios.post(t.$api+"download-ot-template",null,{responseType:"blob"});case 6:return n=e.sent,a=URL.createObjectURL(new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),r=document.createElement("a"),r.href=a,r.setAttribute("download","ot-template.xlsx"),document.body.appendChild(r),r.click(),e.next=15,t.$store.dispatch("completed");case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e["catch"](0),e.next=21,t.$store.dispatch("error");case 21:throw new Error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))()},uploadOT:function(){var t=this;return Object(o["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.$store.dispatch("loading"),e.next=4,I(t.form);case 4:t.$store.dispatch("completed"),t.$router.push(Object(s["a"])(Object(s["a"])({},t.$route),{},{query:{resetTotal:!0}})),t.$emit("UploadOT"),e.next=13;break;case 9:throw e.prev=9,e.t0=e["catch"](0),t.$store.dispatch("error"),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},chooseFile:function(t){var e=this;return Object(o["a"])(Object(c["a"])().mark((function n(){var a,r;return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.target.files[0],r=new FileReader,r.onload=function(t){var n=t.target.result,a=g.a.read(n,{type:"binary"});a.SheetNames.map(function(){var t=Object(o["a"])(Object(c["a"])().mark((function t(n,r){var s,o,i,u,l;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(r>0)){t.next=2;break}return t.abrupt("return");case 2:if(s=g.a.utils.sheet_to_row_object_array(a.Sheets[n]),o=JSON.stringify(s),i=JSON.parse(o),i.length){t.next=7;break}return t.abrupt("return",alert("Empty"));case 7:i.length&&(u=i.map((function(t){var e=Object.entries(t).map((function(t){var e=h(t,2),n=e[0],a=e[1];return{rate:parseFloat(n),hours:a}})),n=e.filter((function(t,e){return 0!==e}));return{employeeCode:t["Employee Code"].split("'").pop(),OTHours:n}})),l={monthlyPaymentId:e.$route.params.id,items:u},e.form=l,e.hasFile=!0);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},r.onerror=function(t){alert(t)},r.readAsBinaryString(a),e.$refs.FileInput.value=null;case 6:case"end":return n.stop()}}),n)})))()},dataBack:function(t){this.$emit("DataBack",t)}}},R=E,A=(n("5f48"),n("2877")),S=Object(A["a"])(R,i,u,!1,null,"1915baec",null),U=S.exports,M=n("d8c2"),P={components:{Upload:U,Loading:M["a"]},data:function(){return{showAmount:!1,isUploadModal:!1,emps:[],rates:[1.5,2,2.5,3,3.5],isLoading:!0}},computed:{getByRate:function(){return function(t,e,n){var a=t.find((function(t){return t.rate===e}));return a?a[n]:""}}},methods:{getOTByMonth:function(){var t=this;return Object(o["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T(t.$route.params.id);case 2:t.emps=e.sent,setTimeout((function(){t.isLoading=!1}),400);case 4:case"end":return e.stop()}}),e)})))()},clearOT:function(){var t=this;return Object(o["a"])(Object(c["a"])().mark((function e(){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$dialog.confirm("Sure ?");case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,t.$store.dispatch("loading"),e.next=9,$(t.$route.params.id);case 9:t.$store.dispatch("completed"),t.$router.push(Object(s["a"])(Object(s["a"])({},t.$route),{},{query:{resetTotal:!0}})),t.getOTByMonth(),e.next=18;break;case 14:throw e.prev=14,e.t0=e["catch"](5),t.$store.dispatch("error"),new Error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})))()},downloadOTTemplate:function(){var t=this;return Object(o["a"])(Object(c["a"])().mark((function e(){var n,a,r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return t.$axios.defaults.headers["Authorization"]=t.getToken,e.next=6,t.$axios.post(t.$api+"download-ot-template",null,{responseType:"blob"});case 6:return n=e.sent,a=URL.createObjectURL(new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),r=document.createElement("a"),r.href=a,r.setAttribute("download","ot-template.xlsx"),document.body.appendChild(r),r.click(),e.next=15,t.$store.dispatch("completed");case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e["catch"](0),e.next=21,t.$store.dispatch("error");case 21:throw new Error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))()}},created:function(){this.getOTByMonth()}},B=P,F=(n("0919"),Object(A["a"])(B,a,r,!1,null,"b2281f6c",null));e["default"]=F.exports},"4fadc":function(t,e,n){"use strict";var a=n("23e7"),r=n("6f53").entries;a({target:"Object",stat:!0},{entries:function(t){return r(t)}})},"5f48":function(t,e,n){"use strict";n("01b8")},"6b75":function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}n.d(e,"a",(function(){return a}))},"6f53":function(t,e,n){"use strict";var a=n("83ab"),r=n("d039"),s=n("e330"),c=n("e163"),o=n("df75"),i=n("fc6a"),u=n("d1e7").f,l=s(u),d=s([].push),f=a&&r((function(){var t=Object.create(null);return t[2]=2,!l(t,2)})),p=function(t){return function(e){var n,r=i(e),s=o(r),u=f&&null===c(r),p=s.length,h=0,b=[];while(p>h)n=s[h++],a&&!(u?n in r:l(r,n))||d(b,t?[n,r[n]]:r[n]);return b}};t.exports={entries:p(!0),values:p(!1)}},"7db0":function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").find,s=n("44d2"),c="find",o=!0;c in[]&&Array(1)[c]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(c)},"90d8":function(t,e,n){"use strict";var a=n("c65b"),r=n("1a2d"),s=n("3a9b"),c=n("ad6d"),o=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in o||r(t,"flags")||!s(o,t)?e:a(c,t)}},9263:function(t,e,n){"use strict";var a=n("c65b"),r=n("e330"),s=n("577e"),c=n("ad6d"),o=n("9f7f"),i=n("5692"),u=n("7c73"),l=n("69f3").get,d=n("fce3"),f=n("107c"),p=i("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,b=h,v=r("".charAt),m=r("".indexOf),y=r("".replace),x=r("".slice),g=function(){var t=/a/,e=/b*/g;return a(h,t,"a"),a(h,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),O=o.BROKEN_CARET,w=void 0!==/()??/.exec("")[1],_=g||w||O||d||f;_&&(b=function(t){var e,n,r,o,i,d,f,_=this,j=l(_),C=s(t),k=j.raw;if(k)return k.lastIndex=_.lastIndex,e=a(b,k,C),_.lastIndex=k.lastIndex,e;var T=j.groups,I=O&&_.sticky,$=a(c,_),E=_.source,R=0,A=C;if(I&&($=y($,"y",""),-1===m($,"g")&&($+="g"),A=x(C,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==v(C,_.lastIndex-1))&&(E="(?: "+E+")",A=" "+A,R++),n=new RegExp("^(?:"+E+")",$)),w&&(n=new RegExp("^"+E+"$(?!\\s)",$)),g&&(r=_.lastIndex),o=a(h,I?n:_,A),I?o?(o.input=x(o.input,R),o[0]=x(o[0],R),o.index=_.lastIndex,_.lastIndex+=o[0].length):_.lastIndex=0:g&&o&&(_.lastIndex=_.global?o.index+o[0].length:r),w&&o&&o.length>1&&a(p,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&T)for(o.groups=d=u(null),i=0;i<T.length;i++)f=T[i],d[f[0]]=o[f[1]];return o}),t.exports=b},"9f7f":function(t,e,n){"use strict";var a=n("d039"),r=n("cfe9"),s=r.RegExp,c=a((function(){var t=s("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),o=c||a((function(){return!s("a","y").sticky})),i=c||a((function(){var t=s("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:i,MISSED_STICKY:o,UNSUPPORTED_Y:c}},a630:function(t,e,n){"use strict";var a=n("23e7"),r=n("4df4"),s=n("1c7e"),c=!s((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:c},{from:r})},ac1f:function(t,e,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(t,e,n){"use strict";var a=n("825a");t.exports=function(){var t=a(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},ee77:function(t,e,n){},f665:function(t,e,n){"use strict";var a=n("23e7"),r=n("2266"),s=n("59ed"),c=n("825a"),o=n("46c4");a({target:"Iterator",proto:!0,real:!0},{find:function(t){c(this),s(t);var e=o(this),n=0;return r(e,(function(e,a){if(t(e,n++))return a(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},fce3:function(t,e,n){"use strict";var a=n("d039"),r=n("cfe9"),s=r.RegExp;t.exports=a((function(){var t=s(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=calculate_overtime.28265b6e.js.map