{"version":3,"sources":["webpack:///./src/graphql/CompanyCurrency.js","webpack:///./src/apis/company-currency-api.js","webpack:///./src/components/CompanySetup/company-currency.vue?c35a","webpack:///./src/apis/reuse-api.js","webpack:///./node_modules/core-js/modules/es.iterator.map.js","webpack:///./node_modules/core-js/internals/iterator-map.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/components/CompanySetup/company-currency.vue","webpack:///src/components/CompanySetup/company-currency.vue","webpack:///./src/components/CompanySetup/company-currency.vue?4ed0","webpack:///./src/components/CompanySetup/company-currency.vue?5625","webpack:///./src/graphql/Reuse.js"],"names":["GET_COMPANY_CURRENCIES","gql","_templateObject","_taggedTemplateLiteral","ADD_OR_UPDATE_COMPANY_CURRENCY","_templateObject2","getCompanyCurrencies","Promise","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resolve","reject","res","wrap","_context","prev","next","apolloClient","query","sent","data","t0","stop","_x","_x2","apply","arguments","addOrUpdateCompanyCurrency","form","_ref2","_callee2","_context2","mutate","mutation","variables","info","_x3","_x4","getReuse","type","GET_REUSES","getReuses","$","map","IS_PURE","target","proto","real","forced","call","aCallable","anObject","getIteratorDirect","createIteratorProxy","callWithSafeIterationClosing","IteratorProxy","iterator","this","result","done","mapper","value","counter","module","exports","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn","length","undefined","render","_vm","_c","_self","staticClass","attrs","_v","domProps","isMulti","on","$event","_b","model","compCurrencies","callback","$$v","expression","dragOptions","_l","i","idx","key","_id","staticStyle","directives","name","rawName","currencyId","$$selectedVal","Array","prototype","filter","options","o","selected","val","_value","$set","multiple","filterCurrencies","_s","scopedSlots","_u","fn","errors","amount","style","composing","spliceCurrency","isLimit","_e","pushCurrency","staticRenderFns","components","Draggable","currencies","drag","computed","_this","curId","mapIds","me","includes","animation","group","disabled","ghostClass","watch","items","methods","_this2","getCurrencies","_this3","_this4","_callee3","_context3","parseInt","$store","dispatch","Error","exceptCur","chooseCurrency","push","alert","splice","comCurrency","created","component"],"mappings":"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","file":"js/company_currency.0bd924a0.js","sourcesContent":["import gql from 'graphql-tag'\r\n\r\nexport const GET_COMPANY_CURRENCIES = gql`\r\n\r\n    {\r\n        getCompanyCurrencies {\r\n            _id\r\n            isMulti\r\n            currencies {\r\n                currencyId {\r\n                    _id\r\n                    name\r\n                }\r\n                amount\r\n            }\r\n        }\r\n    }\r\n\r\n`\r\n\r\nexport const ADD_OR_UPDATE_COMPANY_CURRENCY = gql`\r\n\r\n    mutation (\r\n        $info: AddOrUpdateCompanyCurrencyInput!\r\n    ) {\r\n        addOrUpdateCompanyCurrency(\r\n            info: $info\r\n        )\r\n    }\r\n\r\n`","import {apolloClient} from \"@/services/apollo-client\";\r\nimport {ADD_OR_UPDATE_COMPANY_CURRENCY, GET_COMPANY_CURRENCIES} from \"@/graphql/CompanyCurrency\";\r\n\r\nexport const getCompanyCurrencies = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            const res = await apolloClient.query({\r\n                query: GET_COMPANY_CURRENCIES\r\n            })\r\n            resolve(res.data.getCompanyCurrencies)\r\n        } catch (err) {\r\n            reject(err)\r\n        }\r\n    })\r\n}\r\n\r\n\r\nexport const addOrUpdateCompanyCurrency = (form) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            const res = await apolloClient.mutate({\r\n                mutation: ADD_OR_UPDATE_COMPANY_CURRENCY,\r\n                variables: {\r\n                    info: form\r\n                }\r\n            })\r\n            resolve(res.data.addOrUpdateCompanyCurrency)\r\n        } catch (err) {\r\n            reject(err)\r\n        }\r\n    })\r\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./company-currency.vue?vue&type=style&index=0&id=15d65db6&prod&lang=scss&scoped=true\"","import { apolloClient } from \"@/services/apollo-client\";\r\nimport {GET_REUSES} from \"@/graphql/Reuse\";\r\n\r\n\r\nexport const getReuse = (type) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            const res = await apolloClient.query({\r\n                query: GET_REUSES,\r\n                variables: {\r\n                    type\r\n                }\r\n            })\r\n            resolve(res.data.getReuses)\r\n        } catch (err) {\r\n            reject(err)\r\n        }\r\n    })\r\n}","'use strict';\nvar $ = require('../internals/export');\nvar map = require('../internals/iterator-map');\nvar IS_PURE = require('../internals/is-pure');\n\n// `Iterator.prototype.map` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.map\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  map: map\n});\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\nmodule.exports = function map(mapper) {\n  anObject(this);\n  aCallable(mapper);\n  return new IteratorProxy(getIteratorDirect(this), {\n    mapper: mapper\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ValidationObserver',{staticClass:\"box\",attrs:{\"tag\":\"div\"}},[_c('div',{staticClass:\"box-header\"},[_c('h3',{staticClass:\"box-title\"},[_vm._v(\"Currency\")])]),_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"\"}},[_vm._v(\"Does your company use multiple currency?\")]),_c('div',{staticClass:\"control switch\"},[_c('input',{attrs:{\"type\":\"radio\",\"name\":\"expat\",\"id\":\"expat-no\"},domProps:{\"checked\":!_vm.isMulti},on:{\"click\":function($event){_vm.isMulti = false}}}),_c('label',{attrs:{\"for\":\"expat-no\"}},[_vm._v(\"No\")]),_c('input',{attrs:{\"type\":\"radio\",\"name\":\"expat\",\"id\":\"expat-yes\"},domProps:{\"checked\":_vm.isMulti},on:{\"click\":function($event){_vm.isMulti = true}}}),_c('label',{attrs:{\"for\":\"expat-yes\"}},[_vm._v(\"Yes\")])])]),(_vm.isMulti)?_c('div',[_c('h3',{staticClass:\"title\"},[_vm._v(\"Setup exchange rate\")]),_c('div',{staticClass:\"currency\"},[_c('Draggable',_vm._b({attrs:{\"handle\":\".handle\"},model:{value:(_vm.compCurrencies),callback:function ($$v) {_vm.compCurrencies=$$v},expression:\"compCurrencies\"}},'Draggable',_vm.dragOptions,false),_vm._l((_vm.compCurrencies),function(i,idx){return _c('div',{key:i._id,staticClass:\"field has-addons\"},[_c('p',{staticClass:\"control\",staticStyle:{\"width\":\"270px\"}},[_c('span',{staticClass:\"select\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(i.currencyId._id),expression:\"i.currencyId._id\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(i.currencyId, \"_id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.filterCurrencies(i.currencyId._id)),function(i){return _c('option',{key:i._id,domProps:{\"value\":i._id}},[_vm._v(\" \"+_vm._s(i.name)+\" \")])}),0)])]),_c('div',{staticClass:\"control\",staticStyle:{\"width\":\"370px\"}},[_c('ValidationProvider',{attrs:{\"rules\":\"required|numeric\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ errors }){return [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(i.amount),expression:\"i.amount\"}],staticClass:\"input\",style:(errors[0] ? 'border: 1px solid red' : null),attrs:{\"type\":\"text\",\"placeholder\":\"Exchange rate\"},domProps:{\"value\":(i.amount)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(i, \"amount\", $event.target.value)}}})]}}],null,true)})],1),_c('i',{staticClass:\"fas fa-arrows-alt handle\",staticStyle:{\"cursor\":\"move\",\"font-size\":\"20px\",\"color\":\"#0253b3\"}}),_c('i',{staticClass:\"fas fa-trash splice-icon\",on:{\"click\":function($event){return _vm.spliceCurrency(idx)}}})])}),0),(!_vm.isLimit)?_c('button',{staticClass:\"button\",staticStyle:{\"margin-top\":\"1rem\"},on:{\"click\":_vm.pushCurrency}},[_vm._v(\" Add Currency \")]):_vm._e()],1)]):_vm._e(),_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.addOrUpdateCompanyCurrency}},[_vm._v(\" Save \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ValidationObserver tag=\"div\" class=\"box\">\r\n    <div class=\"box-header\">\r\n      <h3 class=\"box-title\">Currency</h3>\r\n    </div>\r\n    <div class=\"field\">\r\n      <label for=\"\" class=\"label\"\r\n        >Does your company use multiple currency?</label\r\n      >\r\n      <div class=\"control switch\">\r\n        <input\r\n          @click=\"isMulti = false\"\r\n          type=\"radio\"\r\n          name=\"expat\"\r\n          id=\"expat-no\"\r\n          :checked=\"!isMulti\"\r\n        />\r\n        <label for=\"expat-no\">No</label>\r\n\r\n        <input\r\n          @click=\"isMulti = true\"\r\n          type=\"radio\"\r\n          name=\"expat\"\r\n          id=\"expat-yes\"\r\n          :checked=\"isMulti\"\r\n        />\r\n        <label for=\"expat-yes\">Yes</label>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"isMulti\">\r\n      <h3 class=\"title\">Setup exchange rate</h3>\r\n      <div class=\"currency\">\r\n        <Draggable\r\n          v-model=\"compCurrencies\"\r\n          v-bind=\"dragOptions\"\r\n          handle=\".handle\"\r\n        >\r\n          <div\r\n            class=\"field has-addons\"\r\n            v-for=\"(i, idx) in compCurrencies\"\r\n            :key=\"i._id\"\r\n          >\r\n            <p class=\"control\" style=\"width: 270px;\">\r\n              <span class=\"select\">\r\n                <select v-model=\"i.currencyId._id\">\r\n                  <option\r\n                    v-for=\"i in filterCurrencies(i.currencyId._id)\"\r\n                    :key=\"i._id\"\r\n                    :value=\"i._id\"\r\n                  >\r\n                    {{ i.name }}\r\n                  </option>\r\n                </select>\r\n              </span>\r\n            </p>\r\n            <div class=\"control\" style=\"width: 370px;\">\r\n              <ValidationProvider rules=\"required|numeric\" v-slot=\"{ errors }\">\r\n                <input\r\n                  v-model=\"i.amount\"\r\n                  class=\"input\"\r\n                  type=\"text\"\r\n                  placeholder=\"Exchange rate\"\r\n                  :style=\"errors[0] ? 'border: 1px solid red' : null\"\r\n                />\r\n              </ValidationProvider>\r\n            </div>\r\n            <i\r\n              class=\"fas fa-arrows-alt handle\"\r\n              style=\"cursor: move; font-size: 20px; color: #0253b3\"\r\n            ></i>\r\n            <i\r\n              @click=\"spliceCurrency(idx)\"\r\n              class=\"fas fa-trash splice-icon\"\r\n            ></i>\r\n          </div>\r\n        </Draggable>\r\n        <button\r\n          v-if=\"!isLimit\"\r\n          @click=\"pushCurrency\"\r\n          class=\"button\"\r\n          style=\"margin-top: 1rem\"\r\n        >\r\n          Add Currency\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <button @click=\"addOrUpdateCompanyCurrency\" class=\"button primary\">\r\n      Save\r\n    </button>\r\n  </ValidationObserver>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  addOrUpdateCompanyCurrency,\r\n  getCompanyCurrencies,\r\n} from \"@/apis/company-currency-api\";\r\nimport { getReuse } from \"@/apis/reuse-api\";\r\nimport Draggable from \"vuedraggable\";\r\n\r\nexport default {\r\n  components: {\r\n    Draggable,\r\n  },\r\n  data: () => ({\r\n    compCurrencies: [],\r\n    currencies: [],\r\n\r\n    isMulti: true,\r\n\r\n    isLimit: false,\r\n    drag: false,\r\n  }),\r\n  computed: {\r\n    filterCurrencies() {\r\n      return (curId) => {\r\n        const mapIds = this.compCurrencies.map((i) => i.currencyId._id);\r\n        const me = this.currencies.filter(\r\n          (i) => !mapIds.includes(i._id) || i._id === curId\r\n        );\r\n        return me;\r\n      };\r\n    },\r\n    dragOptions() {\r\n      return {\r\n        animation: 200,\r\n        group: \"description\",\r\n        disabled: false,\r\n        ghostClass: \"ghost\",\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    compCurrencies(items) {\r\n      if (items.length === this.currencies.length) this.isLimit = true;\r\n      else this.isLimit = false;\r\n    },\r\n  },\r\n  methods: {\r\n    async getCompanyCurrencies() {\r\n      const data = await getCompanyCurrencies();\r\n      this.isMulti = data.isMulti;\r\n      this.compCurrencies = data.currencies;\r\n    },\r\n    async getCurrencies() {\r\n      const currencies = await getReuse(\"Currency\");\r\n      this.currencies = currencies.filter((i, idx) => idx !== 0);\r\n      this.form.currencyId = this.currencies[0]._id;\r\n    },\r\n    async addOrUpdateCompanyCurrency() {\r\n      const items = this.compCurrencies.map((i) => {\r\n        return {\r\n          currencyId: i.currencyId._id,\r\n          amount: parseInt(i.amount, 10),\r\n        };\r\n      });\r\n      const form = {\r\n        isMulti: this.isMulti,\r\n        items,\r\n      };\r\n      try {\r\n        await this.$store.dispatch(\"loading\");\r\n        await addOrUpdateCompanyCurrency(form);\r\n        await this.$store.dispatch(\"completed\");\r\n      } catch (err) {\r\n        await this.$store.dispatch(\"error\");\r\n        throw new Error(err);\r\n      }\r\n    },\r\n    pushCurrency() {\r\n      const exceptCur = this.chooseCurrency();\r\n      if (!exceptCur) {\r\n        alert(\"Hiii\");\r\n        return;\r\n      }\r\n      this.compCurrencies.push({\r\n        currencyId: {\r\n          _id: this.chooseCurrency(),\r\n        },\r\n        amount: null,\r\n      });\r\n    },\r\n    spliceCurrency(idx) {\r\n      this.compCurrencies.splice(idx, 1);\r\n    },\r\n    chooseCurrency() {\r\n      const comCurrency = this.compCurrencies.map((i) => i.currencyId._id);\r\n      const exceptCur = this.currencies.filter(\r\n        (i) => !comCurrency.includes(i._id)\r\n      );\r\n      if (!exceptCur) return false;\r\n      return exceptCur[0]._id;\r\n    },\r\n  },\r\n  created() {\r\n    this.getCurrencies();\r\n    this.getCompanyCurrencies();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.splice-icon {\r\n  color: $alert-color;\r\n  cursor: pointer;\r\n}\r\n\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: 700;\r\n  color: $font-color;\r\n  margin-bottom: 15px;\r\n  margin-top: 30px;\r\n}\r\n\r\n.input,\r\n.textarea {\r\n  @include input;\r\n}\r\n\r\n.button {\r\n  border-radius: 0;\r\n  background-color: $primary-color;\r\n  border-color: $primary-color;\r\n  color: #fff;\r\n}\r\n\r\n.switch {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 50%;\r\n\r\n  label {\r\n    width: 50%;\r\n    height: 36px;\r\n    background-color: $light-grey-color;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    cursor: pointer;\r\n  }\r\n\r\n  input {\r\n    display: none;\r\n\r\n    &:checked + label {\r\n      background-color: $sub-color;\r\n      color: #fff;\r\n    }\r\n  }\r\n}\r\n\r\n.currency {\r\n  margin-bottom: 20px;\r\n  width: 50%;\r\n\r\n  .has-addons {\r\n    align-items: center;\r\n\r\n    i {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n\r\n  .control {\r\n    &:last-child {\r\n      width: 100%;\r\n    }\r\n\r\n    select {\r\n      border-radius: 0;\r\n    }\r\n\r\n    input {\r\n      border-radius: 0;\r\n    }\r\n  }\r\n\r\n  button.button {\r\n    background-color: $grey-color;\r\n    border: none;\r\n    color: $font-color;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./company-currency.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./company-currency.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./company-currency.vue?vue&type=template&id=15d65db6&scoped=true\"\nimport script from \"./company-currency.vue?vue&type=script&lang=js\"\nexport * from \"./company-currency.vue?vue&type=script&lang=js\"\nimport style0 from \"./company-currency.vue?vue&type=style&index=0&id=15d65db6&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15d65db6\",\n  null\n  \n)\n\nexport default component.exports","import gql from 'graphql-tag'\r\n\r\nexport const GET_REUSES = gql`\r\n    \r\n    query (\r\n        $type: String!\r\n    ) {\r\n        getReuses(\r\n            type: $type\r\n        ) {\r\n            _id\r\n            name\r\n        }\r\n    }\r\n    \r\n`"],"sourceRoot":""}