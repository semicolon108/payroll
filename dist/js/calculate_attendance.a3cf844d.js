(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calculate_attendance"],{"45f0":function(t,e,n){},"463d":function(t,e,n){"use strict";n("f4aa")},"47db":function(t,e,n){"use strict";n("48fd")},"48fd":function(t,e,n){},"5d8b":function(t,e,n){"use strict";n.d(e,"d",(function(){return I})),n.d(e,"f",(function(){return $})),n.d(e,"g",(function(){return E})),n.d(e,"e",(function(){return D})),n.d(e,"b",(function(){return T})),n.d(e,"j",(function(){return S})),n.d(e,"h",(function(){return B})),n.d(e,"i",(function(){return N})),n.d(e,"a",(function(){return A})),n.d(e,"c",(function(){return M}));var a,r,o,s,c,i,l,u,d,m,p=n("c7eb"),y=n("1da1"),h=(n("d3b7"),n("47b6")),b=n("8785"),f=n("5184"),v=Object(f["a"])(a||(a=Object(b["a"])(["\n\n{\n  getIncompleteEmps {\n    employeesCount\n    employees {\n      _id\n            image {\n                src\n            }\n            employeeCode\n            firstName\n            lastName\n            dateOfBirth\n            contactName\n            idCardOrPassport\n            email\n            ssoId\n            isSso\n\n            emergencyContact {\n                fullName\n                contactNumber\n                relationshipId\n            }\n            bankAccount {\n                bankId\n                accountName\n                accountNumber\n            }\n            position\n            department\n\n            isExpat\n            isCompleted\n    }\n  }\n}\n\n"]))),x=Object(f["a"])(r||(r=Object(b["a"])(["\n\n    {\n        getPayrollByMonths {\n            monthlyPaymentId\n            isApproved\n            paymentDate\n            totalSalary\n            totalTax\n            totalSso\n            employeeCount\n            workGroupId {\n                _id\n                name\n                employeesCount\n            }\n        }\n    }\n\n\n"]))),w=Object(f["a"])(o||(o=Object(b["a"])(["\n\nquery (\n  $monthlyPaymentId: ID!\n) {\n  getTotalPayroll(\n    \n    monthlyPaymentId: $monthlyPaymentId\n  ) {\n    totalDeductible\n    totalPayroll\n    totalOT\n    totalBasicSalary\n\n    paymentDate\n  }\n}\n\n"]))),O=Object(f["a"])(s||(s=Object(b["a"])(["\n\nquery ($monthlyPaymentId: ID!) {\n        getPayrollByEmps(monthlyPaymentId: $monthlyPaymentId) {\n            hasExpat\n            employeeWage {\n              tax\n              ssoPaidByEmp\n              totalEarning\n              totalDeduction\n              netPay\n            }\n            totalPayrollCost {\n              netPay\n              ssoPaidByCom\n              totalPayrollCost\n            }\n            paymentSummary {\n              netPay\n              tax\n              totalSso\n            }\n            employees {\n                employeeId\n                employeeCode\n\n                mobile\n                email\n\n                bankAccount {\n                  bankName\n                  accountName\n                  accountNumber\n                }\n    \n              \n                fullName\n                fullNameLao\n              \n                position\n                department\n              \n      \n\n                earningBeforeTax\n                earningAfterTax\n                earningBeforeSso\n                earningAfterSso\n\n                deductionBeforeTax\n                deductionAfterTax\n                deductionBeforeSso\n                deductionAfterSso\n\n\n                calcDeductible\n                deductibleBeforeTax\n                deductibleAfterTax\n              \n              \n                basicSalary              \n                salaryGrade\n                startWorkingDate\n                defaultWorkingDay\n                actualWorkingDay\n                thisMonthSalary\n                isExpat\n\n                OTHours\n                OTAmount\n                earnings\n                deductions\n\n\n                totalOTAmount\n                totalDueAsTax\n              \n                ssoPaidByCom\n                ssoPaidByEmp\n                calcSso\n                tax\n                customFormulas {\n                    key\n                    value\n                   # isFinalNetPay\n                }\n                customFields {\n                    key\n                    value\n         \n                }\n              finalNetPay\n\n              isRequestSent\n              isPayslipSent\n            }\n            date\n            isApproved\n            isRequestSent\n            isRequestApproved\n            isPayslipSent\n          \n            isCalculated\n            \n\n        }\n    }\n\n\n\n\n"]))),j=Object(f["a"])(c||(c=Object(b["a"])(["\n\nmutation (\n        $monthlyPaymentId: ID!\n        $status: String\n    ) {\n        calcPayroll (\n            monthlyPaymentId: $monthlyPaymentId\n            status: $status\n        )\n    }\n\n"]))),C=Object(f["a"])(i||(i=Object(b["a"])(["\n\n    mutation (\n        $monthlyPaymentId: ID!\n    ) {\n        sendRequestCalc(\n            monthlyPaymentId: $monthlyPaymentId\n        )\n    }\n\n"]))),P=Object(f["a"])(l||(l=Object(b["a"])(["\n\n  mutation (\n    $monthlyPaymentId: ID!\n    $employeeIds: [ID!]!\n  ) {\n    sendPayslipByEmps(\n      monthlyPaymentId: $monthlyPaymentId\n      employeeIds: $employeeIds\n    )\n  }\n\n"]))),k=Object(f["a"])(u||(u=Object(b["a"])(["\n\n    mutation (\n        $monthlyPaymentId: ID!\n    ) {\n        sendPayslip(\n            monthlyPaymentId: $monthlyPaymentId\n        )\n    }\n\n"]))),g=Object(f["a"])(d||(d=Object(b["a"])(["\n\nmutation (\n  $workGroupId: ID!\n) {\n  addPayroll(\n    workGroupId: $workGroupId\n  )\n}\n\n"]))),_=Object(f["a"])(m||(m=Object(b["a"])(["\n\nmutation (\n  $monthlyPaymentId: ID!\n) {\n  deletePayroll(\n    monthlyPaymentId: $monthlyPaymentId\n  )\n}\n\n"]))),I=function(){return new Promise(function(){var t=Object(y["a"])(Object(p["a"])().mark((function t(e,n){var a;return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["a"].query({query:v});case 3:a=t.sent,e(a.data.getIncompleteEmps),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},$=function(){return new Promise(function(){var t=Object(y["a"])(Object(p["a"])().mark((function t(e,n){var a;return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["a"].query({query:x});case 3:a=t.sent,e(a.data.getPayrollByMonths),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},E=function(t){return new Promise(function(){var e=Object(y["a"])(Object(p["a"])().mark((function e(n,a){var r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].query({query:w,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.getTotalPayroll),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},D=function(t){return new Promise(function(){var e=Object(y["a"])(Object(p["a"])().mark((function e(n,a){var r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].query({query:O,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.getPayrollByEmps),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},T=function(t,e){return new Promise(function(){var n=Object(y["a"])(Object(p["a"])().mark((function n(a,r){var o;return Object(p["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h["a"].mutate({mutation:j,variables:{monthlyPaymentId:t,status:e}});case 3:o=n.sent,a(o.data.calcPayroll),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),r(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(t,e){return n.apply(this,arguments)}}())},S=function(t){return new Promise(function(){var e=Object(y["a"])(Object(p["a"])().mark((function e(n,a){var r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].mutate({mutation:C,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.sendRequestCalc),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},B=function(t){return new Promise(function(){var e=Object(y["a"])(Object(p["a"])().mark((function e(n,a){var r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].mutate({mutation:k,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.sendPayslip),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},N=function(t){return new Promise(function(){var e=Object(y["a"])(Object(p["a"])().mark((function e(n,a){var r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].mutate({mutation:P,variables:t});case 3:r=e.sent,n(r.data.sendPayslipByEmps),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},A=function(t){return new Promise(function(){var e=Object(y["a"])(Object(p["a"])().mark((function e(n,a){var r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].mutate({mutation:g,variables:{workGroupId:t}});case 3:r=e.sent,n(r.data.addPayroll),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},M=function(t){return new Promise(function(){var e=Object(y["a"])(Object(p["a"])().mark((function e(n,a){var r;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].mutate({mutation:_,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.deletePayroll),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())}},6439:function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"checker"}},[e("div",{staticClass:"checker-header"},[e("h3",[t._v("Validate Uploaded Deductable Data")]),e("div",{staticClass:"button-group"},[e("button",{staticClass:"button",on:{click:function(e){return t.$emit("CloseModal")}}},[t._v("Cancel")]),e("button",{staticClass:"button is-sub",on:{click:function(e){return t.$emit("ReUpload")}}},[t._v(" Re-Upload ")]),0===t.data.totalError?e("button",{staticClass:"button is-primary",on:{click:t.addDeductible}},[t._v(" Save ")]):t._e()])]),e("div",{staticClass:"columns status-boxs"},[e("div",{staticClass:"column is-3"},[e("div",{staticClass:"box"},[e("span",[t._v("Number Of Information")]),e("h3",[t._v(t._s(t.data.total))])])]),e("div",{staticClass:"column is-3"},[e("div",{staticClass:"box error"},[e("span",[t._v("Number of Error Found")]),e("h3",[t._v(t._s(t.data.totalError))])])])]),e("div",{staticClass:"box"},[e("table",{staticClass:"table is-fullwidth",attrs:{id:"my-table"}},[t._m(0),e("tbody",t._l(t.data.items,(function(n,a){return e("tr",{key:a},[e("td",[t._v(t._s(n.column))]),e("td",{class:{"error-item":t.data.isEmployeeError}},[t._v(" "+t._s(n.employeeCode)+" ")]),e("td",[t._v(t._s(n.fullName))]),e("td",[e("span",{class:{"error-item":t.data.isTypeError}},[t._v(" "+t._s(n.earnDeductName)+" "),e("br")])]),e("td",{staticClass:"is-right"},[t._v(t._s(n.amount))])])})),0)])])])},r=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"is-xxs"},[t._v("Column")]),e("th",[t._v("Employee ID")]),e("th",[t._v("Employee Name")]),e("th",[t._v("Earning / Deuction Type")]),e("th",{staticClass:"is-sm is-right"},[t._v("Amount (LAK)")])])])}],o=n("c7eb"),s=n("5530"),c=n("1da1"),i=(n("d9e2"),n("d81d"),n("14d9"),n("e9f5"),n("ab43"),n("d3b7"),n("d04f")),l=n("5d8b"),u={props:["data"],methods:{calcPayroll:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["b"])(t.$route.params.id);case 2:t.$router.push(Object(s["a"])(Object(s["a"])({},t.$route),{},{query:{resetTotal:!0}}));case 3:case"end":return e.stop()}}),e)})))()},addDeductible:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function e(){var n,a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.data.items.map((function(t){var e=t.amount;return{employeeCode:t.employeeCode,type:t.type,amount:e}})),a={monthlyPaymentId:t.$route.params.id,items:n},e.prev=2,t.$store.dispatch("loading"),e.next=6,Object(i["a"])(a);case 6:return e.next=8,t.calcPayroll();case 8:t.$store.dispatch("completed"),t.$router.push(Object(s["a"])(Object(s["a"])({},t.$route),{},{query:{resetTotal:!0}})),e.next=16;break;case 12:throw e.prev=12,e.t0=e["catch"](2),t.$store.dispatch("error"),new Error(e.t0);case 16:t.$emit("DataBack"),t.$emit("CloseModal");case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))()}}},d=u,m=(n("463d"),n("2877")),p=Object(m["a"])(d,a,r,!1,null,"c9c744c4",null);e["a"]=p.exports},a741:function(t,e,n){"use strict";n.r(e);n("b0c0");var a,r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"_tabs"},[e("ul",t._l(t.filteredWages,(function(n){return e("li",{key:n._id,class:{"is-active":n.name===t.layoutSelected},on:{click:function(e){t.layoutSelected=n.name}}},[e("a",[t._v(t._s(n.name))])])})),0)]),e("div",{staticClass:"box"},[e("div",{staticClass:"table-container"},[e("table",{staticClass:"table is-fullwidth",attrs:{id:"my-table"}},[t._m(1),e("tbody",t._l(t.employees,(function(n,a){return e("tr",{key:a},[e("td",[t._v(t._s(n.employeeCode))]),e("td",[t._v(t._s(n.fullName))]),e("td",[t._v(t._s(n.mobile))]),e("td",{staticClass:"is-center"},[t._v(t._s(n.wageType))]),e("td",{staticClass:"is-right"},[t._v(t._s(t._f("currency")(n.basicSalary)))]),e("td",{staticClass:"is-right"},[t._v(" "+t._s(n.actualWorkingDay)+" ")]),e("td",{staticClass:"is-right"},[t._v(t._s(t._f("currency")(n.thisMonthSalary)))])])})),0)])])]),e(t.ModalClick,{tag:"component",on:{CloseModal:function(e){t.ModalClick=""}}})],1)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header no-border no-padding margin-bottom-20 no-shadow"},[e("div",{staticClass:"header-start"},[e("div",{staticClass:"header-title"},[e("h3",[t._v("Basic Salary Calculation")])])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"is-xxs"},[t._v("ID")]),e("th",[t._v(" Employee name ")]),e("th",{staticClass:"is-xs is-center"},[t._v("Contact Number")]),e("th",{staticClass:"is-xs is-center"},[t._v("Payment Type")]),e("th",{staticClass:"is-xs is-right"},[t._v("Daily Wage Rate")]),e("th",{staticClass:"is-xxs is-right"},[t._v("Work Day")]),e("th",{staticClass:"is-xs is-right"},[t._v("Total Wage / Salary")])])])}],s=n("c7eb"),c=n("1da1"),i=(n("4de4"),n("e9f5"),n("910d"),n("d3b7"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal is-active"},[e("div",{staticClass:"modal-background",on:{click:t.CloseModal}}),e("div",{staticClass:"modal-card slide-down"},[e("div",{staticClass:"modal-card-head"},[e("h3",[t._v("Upload Work Day")]),e("p",[t._v("Please download to fill employee work day")]),e("a",{staticClass:"template-file",on:{click:t.downloadTemplate}},[e("i",{staticClass:"fas fa-file-excel"}),t._v("Excel Template")]),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.CloseModal}})]),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"upload-box"},[e("div",{staticClass:"upload"},[e("button",{staticClass:"button upload-btn",on:{click:function(e){return t.$refs.FileInput.click()}}},[t._v(" Select File ")]),e("span",[t._v("File support Excel")]),e("input",{ref:"FileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.chooseFile}})]),e("input",{ref:"uploadFile",staticClass:"input is-hidden",attrs:{type:"file"}})])]),t._m(0)]),t.isChecker?e("Checker",{attrs:{data:t.data},on:{CloseModal:function(e){t.isChecker=!1,t.CloseModal()},DataBack:t.dataBack,ReUpload:function(e){return t.$refs.FileInput.click()}}}):t._e()],1)}),l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button primary"},[t._v("Save")])])}],u=n("5530"),d=(n("d9e2"),n("d81d"),n("14d9"),n("ab43"),n("e9c4"),n("b680"),n("b64b"),n("3ca3"),n("ddb0"),n("2b3d"),n("bf19"),n("9861"),n("88a7"),n("271a"),n("5494"),n("2f62")),m=n("1146"),p=n.n(m),y=n("d04f"),h=n("6439"),b={components:{Checker:h["a"]},data:function(){return{data:[],isChecker:!1}},computed:Object(u["a"])({},Object(d["c"])(["getToken"])),methods:{CloseModal:function(){this.$emit("CloseModal")},downloadTemplate:function(){var t=this;return Object(c["a"])(Object(s["a"])().mark((function e(){var n,a,r;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return t.$axios.defaults.headers["Authorization"]=t.getToken,e.next=6,t.$axios.post(t.$api+"download-deductable-template",{monthlyPaymentId:t.$route.params.id},{responseType:"blob"});case 6:return n=e.sent,a=URL.createObjectURL(new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),r=document.createElement("a"),r.href=a,r.setAttribute("download","deductable-template.xlsx"),document.body.appendChild(r),r.click(),e.next=15,t.$store.dispatch("completed");case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e["catch"](0),e.next=21,t.$store.dispatch("error");case 21:throw new Error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))()},chooseFile:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.target.files[0],r=new FileReader,r.onload=function(t){var n=t.target.result,a=p.a.read(n,{type:"binary"});a.SheetNames.map(function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(n,r){var o,c,i,l,d,m,h;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(r>0)){t.next=2;break}return t.abrupt("return");case 2:if(o=p.a.utils.sheet_to_row_object_array(a.Sheets[n]),c=JSON.stringify(o),i=JSON.parse(c),i.length){t.next=7;break}return t.abrupt("return",alert("Empty"));case 7:if(!i.length){t.next=30;break}return l=[],i.map((function(t){var e=Object.keys(t),n=e.filter((function(t){return"Employee Code"!==t&&"Full Name"!==t}));n.map((function(e){var n={employeeCode:t["Employee Code"],type:e,amount:t[e].toFixed(2)};l.push(n)}))})),d=l.map((function(t){return Object(u["a"])(Object(u["a"])({},t),{},{employeeCode:t.employeeCode.split("'").pop()})})),t.prev=11,t.next=14,e.$store.dispatch("loading");case 14:return t.next=16,Object(y["d"])(d);case 16:return m=t.sent,t.next=19,e.$store.dispatch("completed");case 19:e.data={items:m.items,total:m.total,totalError:m.totalError},e.isChecker=!0,t.next=30;break;case 23:return t.prev=23,t.t0=t["catch"](11),t.next=27,e.$store.dispatch("error");case 27:h=t.t0.graphQLErrors[0].extensions.validationErrors,h.typeErrors.length?e.data={items:h.typeErrors,total:h.total,totalError:h.totalError,isTypeError:!0}:h.employeeErrors.length&&(e.data={items:h.employeeErrors,total:h.total,totalError:h.totalError,isEmployeeError:!0}),e.isChecker=!0;case 30:case"end":return t.stop()}}),t,null,[[11,23]])})));return function(e,n){return t.apply(this,arguments)}}())},r.onerror=function(t){alert(t)},r.readAsBinaryString(a),e.$refs.FileInput.value=null;case 6:case"end":return n.stop()}}),n)})))()},dataBack:function(t){this.$emit("DataBack",t)}}},f=b,v=(n("de79"),n("2877")),x=Object(v["a"])(f,i,l,!1,null,"1fe36e43",null),w=x.exports,O=n("47b6"),j=n("8785"),C=n("5184"),P=Object(C["a"])(a||(a=Object(j["a"])(["\n    \n    query (\n  $wageType: String!\n  $monthlyPaymentId: ID!\n) {\n  getEmpsByWageType(wageType: $wageType monthlyPaymentId: $monthlyPaymentId) {\n    employeeId\n                employeeCode\n              \n                wageType\n                mobile\n                fullName\n                fullNameLao\n              \n                position\n                department\n    \n               defaultWorkingDay\n                actualWorkingDay\n    \n                 basicSalary    \n              thisMonthSalary\n              \n                earningBeforeTax\n                earningAfterTax\n                deductionBeforeTax\n                deductionAfterTax\n                calcDeductible\n                deductibleBeforeTax\n                deductibleAfterTax\n              \n              \n                     \n                salaryGrade\n                startWorkingDate\n             \n                thisMonthSalary\n                isExpat\n\n           \n                totalOTAmount\n                totalDueAsTax\n              \n                ssoPaidByCom\n                ssoPaidByEmp\n                calcSso\n                tax\n  }\n  \n}\n    \n"]))),k=function(t){return new Promise(function(){var e=Object(c["a"])(Object(s["a"])().mark((function e(n,a){var r;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O["a"].query({query:P,variables:{wageType:t.wageType,monthlyPaymentId:t.monthlyPaymentId}});case 3:r=e.sent,n(r.data.getEmpsByWageType),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},g={components:{Upload:w},data:function(){return{ModalClick:"",layoutSelected:"Monthly",wage:[{name:"Monthly"},{name:"Daily"}],employees:[],monthlyEmpsCount:0,dailyEmpsCount:0}},watch:{layoutSelected:function(){this.getEmps()}},computed:{filteredWages:function(){var t=this;return this.wage.filter((function(e){return"Monthly"===e.name&&t.monthlyEmpsCount||"Daily"===e.name&&t.dailyEmpsCount?e:void 0}))}},methods:{getEmps:function(){var t=this;return Object(c["a"])(Object(s["a"])().mark((function e(){var n,a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={wageType:t.layoutSelected,monthlyPaymentId:t.$route.params.id},e.next=3,k(n);case 3:a=e.sent,t.employees=a;case 5:case"end":return e.stop()}}),e)})))()},checkWage:function(){var t=this;return Object(c["a"])(Object(s["a"])().mark((function e(){var n,a,r,o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={wageType:"Monthly",monthlyPaymentId:t.$route.params.id},a={wageType:"Daily",monthlyPaymentId:t.$route.params.id},e.next=4,k(n);case 4:return r=e.sent,e.next=7,k(a);case 7:o=e.sent,t.monthlyEmpsCount=r.length,t.dailyEmpsCount=o.length,t.monthlyEmpsCount?t.layoutSelected="Monthly":t.layoutSelected="Daily";case 11:case"end":return e.stop()}}),e)})))()}},created:function(){this.getEmps(),this.checkWage()}},_=g,I=(n("47db"),Object(v["a"])(_,r,o,!1,null,"540a8522",null));e["default"]=I.exports},ab43:function(t,e,n){"use strict";var a=n("23e7"),r=n("d024"),o=n("c430");a({target:"Iterator",proto:!0,real:!0,forced:o},{map:r})},d024:function(t,e,n){"use strict";var a=n("c65b"),r=n("59ed"),o=n("825a"),s=n("46c4"),c=n("c5cc"),i=n("9bdd"),l=c((function(){var t=this.iterator,e=o(a(this.next,t)),n=this.done=!!e.done;if(!n)return i(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return o(this),r(t),new l(s(this),{mapper:t})}},d04f:function(t,e,n){"use strict";n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return f})),n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return x}));var a,r,o,s,c=n("c7eb"),i=n("1da1"),l=(n("d3b7"),n("47b6")),u=n("8785"),d=n("5184"),m=Object(d["a"])(a||(a=Object(u["a"])(["\n\nquery (\n        $monthlyPaymentId: ID!\n    ) {\n        getMonthlyPaymentEmployees (monthlyPaymentId: $monthlyPaymentId) {\n            isApproved\n            date\n            employees {\n                _id\n                employee {\n                    _id\n                    employeeCode\n                    fullName\n                }\n                earnDeduct {\n                    _id\n                    type\n                    name\n                    amount\n                    subAmount\n                    isAmount\n                    chooseAmount\n                }\n            }\n          earnings {\n            name\n            total\n          }\n        deductions {\n          name\n          total\n        }\n        totalEarnings\n        totalDeductions\n        totalDeductible\n        }\n    }\n\n\n"]))),p=Object(d["a"])(r||(r=Object(u["a"])(["\n\n\n    mutation (\n        $items: [UploadDeductibleInput!]!\n    ) {\n        uploadDeductable (\n            info: $items\n        ) {\n            items {\n                column\n                employeeCode\n                fullName\n                type\n                earnDeductName\n                amount\n            }\n            total\n            totalError\n        }\n    }\n    \n\n"]))),y=Object(d["a"])(o||(o=Object(u["a"])(["\n\n    mutation (\n        $items: [DeductibleInput!]!\n        $monthlyPaymentId: ID!) {\n        addDeductible(info: {\n            items: $items\n            monthlyPaymentId: $monthlyPaymentId\n        })\n    }\n\n\n\n"]))),h=Object(d["a"])(s||(s=Object(u["a"])(["\n\n    mutation (\n        $monthlyPaymentId: ID!\n    ) {\n        approveDeductible (\n            monthlyPaymentId: $monthlyPaymentId\n        )\n    }\n\n"]))),b=function(t){return new Promise(function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(n,a){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].query({query:m,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.getMonthlyPaymentEmployees),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},f=function(t){return new Promise(function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(n,a){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].mutate({mutation:p,variables:{items:t}});case 3:r=e.sent,n(r.data.uploadDeductable),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},v=function(t){return new Promise(function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(n,a){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].mutate({mutation:y,variables:{monthlyPaymentId:t.monthlyPaymentId,items:t.items}});case 3:r=e.sent,n(r.data.addDeductible),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},x=function(t){return new Promise(function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(n,a){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].mutate({mutation:h,variables:{monthlyPaymentId:t}});case 3:r=e.sent,n(r.data.approveDeductible),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())}},d81d:function(t,e,n){"use strict";var a=n("23e7"),r=n("b727").map,o=n("1dde"),s=o("map");a({target:"Array",proto:!0,forced:!s},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},de79:function(t,e,n){"use strict";n("45f0")},f4aa:function(t,e,n){}}]);
//# sourceMappingURL=calculate_attendance.a3cf844d.js.map