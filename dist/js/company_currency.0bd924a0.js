(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["company_currency"],{1119:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var r,c,a=n("c7eb"),i=n("1da1"),s=(n("d3b7"),n("47b6")),u=n("8785"),o=n("5184"),d=Object(o["a"])(r||(r=Object(u["a"])(["\n\n    {\n        getCompanyCurrencies {\n            _id\n            isMulti\n            currencies {\n                currencyId {\n                    _id\n                    name\n                }\n                amount\n            }\n        }\n    }\n\n"]))),l=Object(o["a"])(c||(c=Object(u["a"])(["\n\n    mutation (\n        $info: AddOrUpdateCompanyCurrencyInput!\n    ) {\n        addOrUpdateCompanyCurrency(\n            info: $info\n        )\n    }\n\n"]))),p=function(){return new Promise(function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t,n){var r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s["a"].query({query:d});case 3:r=e.sent,t(r.data.getCompanyCurrencies),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},f=function(e){return new Promise(function(){var t=Object(i["a"])(Object(a["a"])().mark((function t(n,r){var c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].mutate({mutation:l,variables:{info:e}});case 3:c=t.sent,n(c.data.addOrUpdateCompanyCurrency),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),r(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())}},"40ff":function(e,t,n){"use strict";n("a413")},7811:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("c7eb"),c=n("1da1"),a=(n("d3b7"),n("47b6")),i=n("e896"),s=function(e){return new Promise(function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(n,c){var s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a["a"].query({query:i["a"],variables:{type:e}});case 3:s=t.sent,n(s.data.getReuses),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),c(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())}},a413:function(e,t,n){},ab43:function(e,t,n){"use strict";var r=n("23e7"),c=n("d024"),a=n("c430");r({target:"Iterator",proto:!0,real:!0,forced:a},{map:c})},d024:function(e,t,n){"use strict";var r=n("c65b"),c=n("59ed"),a=n("825a"),i=n("46c4"),s=n("c5cc"),u=n("9bdd"),o=s((function(){var e=this.iterator,t=a(r(this.next,e)),n=this.done=!!t.done;if(!n)return u(e,this.mapper,[t.value,this.counter++],!0)}));e.exports=function(e){return a(this),c(e),new o(i(this),{mapper:e})}},d81d:function(e,t,n){"use strict";var r=n("23e7"),c=n("b727").map,a=n("1dde"),i=a("map");r({target:"Array",proto:!0,forced:!i},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},db62:function(e,t,n){"use strict";n.r(t);n("4de4"),n("d81d"),n("b0c0"),n("e9f5"),n("ab43"),n("d3b7");var r=function(){var e=this,t=e._self._c;return t("ValidationObserver",{staticClass:"box",attrs:{tag:"div"}},[t("div",{staticClass:"box-header"},[t("h3",{staticClass:"box-title"},[e._v("Currency")])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label",attrs:{for:""}},[e._v("Does your company use multiple currency?")]),t("div",{staticClass:"control switch"},[t("input",{attrs:{type:"radio",name:"expat",id:"expat-no"},domProps:{checked:!e.isMulti},on:{click:function(t){e.isMulti=!1}}}),t("label",{attrs:{for:"expat-no"}},[e._v("No")]),t("input",{attrs:{type:"radio",name:"expat",id:"expat-yes"},domProps:{checked:e.isMulti},on:{click:function(t){e.isMulti=!0}}}),t("label",{attrs:{for:"expat-yes"}},[e._v("Yes")])])]),e.isMulti?t("div",[t("h3",{staticClass:"title"},[e._v("Setup exchange rate")]),t("div",{staticClass:"currency"},[t("Draggable",e._b({attrs:{handle:".handle"},model:{value:e.compCurrencies,callback:function(t){e.compCurrencies=t},expression:"compCurrencies"}},"Draggable",e.dragOptions,!1),e._l(e.compCurrencies,(function(n,r){return t("div",{key:n._id,staticClass:"field has-addons"},[t("p",{staticClass:"control",staticStyle:{width:"270px"}},[t("span",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:n.currencyId._id,expression:"i.currencyId._id"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(n.currencyId,"_id",t.target.multiple?r:r[0])}}},e._l(e.filterCurrencies(n.currencyId._id),(function(n){return t("option",{key:n._id,domProps:{value:n._id}},[e._v(" "+e._s(n.name)+" ")])})),0)])]),t("div",{staticClass:"control",staticStyle:{width:"370px"}},[t("ValidationProvider",{attrs:{rules:"required|numeric"},scopedSlots:e._u([{key:"default",fn:function(r){var c=r.errors;return[t("input",{directives:[{name:"model",rawName:"v-model",value:n.amount,expression:"i.amount"}],staticClass:"input",style:c[0]?"border: 1px solid red":null,attrs:{type:"text",placeholder:"Exchange rate"},domProps:{value:n.amount},on:{input:function(t){t.target.composing||e.$set(n,"amount",t.target.value)}}})]}}],null,!0)})],1),t("i",{staticClass:"fas fa-arrows-alt handle",staticStyle:{cursor:"move","font-size":"20px",color:"#0253b3"}}),t("i",{staticClass:"fas fa-trash splice-icon",on:{click:function(t){return e.spliceCurrency(r)}}})])})),0),e.isLimit?e._e():t("button",{staticClass:"button",staticStyle:{"margin-top":"1rem"},on:{click:e.pushCurrency}},[e._v(" Add Currency ")])],1)]):e._e(),t("button",{staticClass:"button primary",on:{click:e.addOrUpdateCompanyCurrency}},[e._v(" Save ")])])},c=[],a=n("c7eb"),i=n("1da1"),s=(n("d9e2"),n("caad"),n("14d9"),n("a434"),n("910d"),n("2532"),n("1119")),u=n("7811"),o=n("b76a"),d=n.n(o),l={components:{Draggable:d.a},data:function(){return{compCurrencies:[],currencies:[],isMulti:!0,isLimit:!1,drag:!1}},computed:{filterCurrencies:function(){var e=this;return function(t){var n=e.compCurrencies.map((function(e){return e.currencyId._id})),r=e.currencies.filter((function(e){return!n.includes(e._id)||e._id===t}));return r}},dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},watch:{compCurrencies:function(e){e.length===this.currencies.length?this.isLimit=!0:this.isLimit=!1}},methods:{getCompanyCurrencies:function(){var e=this;return Object(i["a"])(Object(a["a"])().mark((function t(){var n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["b"])();case 2:n=t.sent,e.isMulti=n.isMulti,e.compCurrencies=n.currencies;case 5:case"end":return t.stop()}}),t)})))()},getCurrencies:function(){var e=this;return Object(i["a"])(Object(a["a"])().mark((function t(){var n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])("Currency");case 2:n=t.sent,e.currencies=n.filter((function(e,t){return 0!==t})),e.form.currencyId=e.currencies[0]._id;case 5:case"end":return t.stop()}}),t)})))()},addOrUpdateCompanyCurrency:function(){var e=this;return Object(i["a"])(Object(a["a"])().mark((function t(){var n,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.compCurrencies.map((function(e){return{currencyId:e.currencyId._id,amount:parseInt(e.amount,10)}})),r={isMulti:e.isMulti,items:n},t.prev=2,t.next=5,e.$store.dispatch("loading");case 5:return t.next=7,Object(s["a"])(r);case 7:return t.next=9,e.$store.dispatch("completed");case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t["catch"](2),t.next=15,e.$store.dispatch("error");case 15:throw new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,11]])})))()},pushCurrency:function(){var e=this.chooseCurrency();e?this.compCurrencies.push({currencyId:{_id:this.chooseCurrency()},amount:null}):alert("Hiii")},spliceCurrency:function(e){this.compCurrencies.splice(e,1)},chooseCurrency:function(){var e=this.compCurrencies.map((function(e){return e.currencyId._id})),t=this.currencies.filter((function(t){return!e.includes(t._id)}));return!!t&&t[0]._id}},created:function(){this.getCurrencies(),this.getCompanyCurrencies()}},p=l,f=(n("40ff"),n("2877")),m=Object(f["a"])(p,r,c,!1,null,"15d65db6",null);t["default"]=m.exports},e896:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,c=n("8785"),a=n("5184"),i=Object(a["a"])(r||(r=Object(c["a"])(["\n    \n    query (\n        $type: String!\n    ) {\n        getReuses(\n            type: $type\n        ) {\n            _id\n            name\n        }\n    }\n    \n"])))}}]);
//# sourceMappingURL=company_currency.0bd924a0.js.map