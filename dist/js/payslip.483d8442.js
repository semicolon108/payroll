(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["payslip"],{"1a40":function(n,t,e){"use strict";e("fc30")},"28be":function(n,t,e){"use strict";e.r(t);var a=function(){var n=this,t=n._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"page-header no-border no-padding margin-bottom-20 no-shadow"},[n._m(0),t("div",{staticClass:"header-end"},[t("button",{staticClass:"button primary",class:{"bulk-sending":n.bulkSending},on:{click:n.sendPayslipByEmps}},[n._m(1),n._m(2),t("span",[n._v("Send Bulk Payslip")]),t("span",[n._v("Sending")])])])]),t("div",{staticClass:"box"},[t("div",{staticClass:"table-container"},[t("table",{staticClass:"table is-fullwidth",attrs:{id:"my-table"}},[n._m(3),t("tbody",n._l(n.items,(function(e){return t("tr",{key:e._id},[t("td",[n._v(n._s(e.employeeCode))]),t("td",[n._v(n._s(e.fullName))]),t("td",[n._v(n._s(n._f("currency")(e.finalNetPay)))]),t("td",{staticClass:"is-right"},[n._v(" "+n._s(e.isPayslipSent?"Sent":e.isRequestSent?"Pending":"Unsend")+" ")]),t("td",{staticClass:"is-right"},[t("ul",{staticClass:"option"},[t("li",{on:{click:function(t){return n.downloadPayslip(e.employeeId)}}},[n._v("Preview")])])])])})),0)])])]),t(n.modal,{tag:"component",on:{Close:n.CloseModal}})],1)},r=[function(){var n=this,t=n._self._c;return t("div",{staticClass:"header-start"},[t("div",{staticClass:"header-title"},[t("h3",[n._v("Payslip")])])])},function(){var n=this,t=n._self._c;return t("span",[t("i",{staticClass:"fal fa-paper-plane"})])},function(){var n=this,t=n._self._c;return t("span",[t("i",{staticClass:"fas fa-plane"})])},function(){var n=this,t=n._self._c;return t("thead",[t("tr",[t("th",{staticClass:"is-xxs"},[n._v("Employee ID")]),t("th",[n._v("Employee name")]),t("th",{staticClass:"is-sm"},[n._v("Net pay")]),t("th",{staticClass:"is-xxs is-right"},[n._v("Status")]),t("th",{staticClass:"is-sm is-right"},[n._v("Option")])])])}],s=e("c7eb"),o=e("1da1"),c=e("5530"),i=(e("d9e2"),e("99af"),e("d81d"),e("e9f5"),e("ab43"),e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("bf19"),e("9861"),e("88a7"),e("271a"),e("5494"),e("5d8b")),u=function(){var n=this,t=n._self._c;return t("div",{staticClass:"modal is-active"},[t("div",{staticClass:"modal-background",on:{click:function(t){return n.CloseModal()}}}),t("div",{staticClass:"modal-content slide-down"},[t("div",{staticClass:"box"},[t("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:function(t){return n.CloseModal()}}}),t("h3",[n._v("Are you sure?")]),n._m(0),t("button",{staticClass:"button primary",on:{click:function(t){return n.CloseModal()}}},[n._v("Confirm")])])])])},l=[function(){var n=this,t=n._self._c;return t("p",[n._v("You are going to resend payslip to all of your candidates "),t("span",[n._v("30/30")])])}],d={methods:{CloseModal:function(){this.$emit("Close")}}},p=d,m=(e("4ea8"),e("2877")),y=Object(m["a"])(p,u,l,!1,null,"b391a79a",null),f=y.exports,b=e("2f62"),h={components:{confirm:f},data:function(){return{sending:!1,bulkSending:!1,modal:"",payrollEmps:{},items:[],isLoading:!0}},created:function(){this.getPayrollByEmps()},computed:Object(c["a"])({},Object(b["c"])(["getToken"])),methods:{sendPayslipByEmps:function(){var n=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var e,a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$dialog.confirm();case 2:if(e=t.sent,!e){t.next=14;break}return n.bulkSending=!0,a=n.items.map((function(n){return n.employeeId})),t.next=8,n.$store.dispatch("loading");case 8:return r={monthlyPaymentId:n.$route.params.id,employeeIds:a},t.next=11,Object(i["i"])(r);case 11:return n.getPayrollByEmps(),t.next=14,setTimeout(Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("stopLoading");case 2:n.bulkSending=!1;case 3:case"end":return t.stop()}}),t)}))),1800);case 14:case"end":return t.stop()}}),t)})))()},getPayrollByEmps:function(){var n=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["e"])(n.$route.params.id);case 2:n.payrollEmps=t.sent,n.items=n.payrollEmps.employees,setTimeout((function(){n.isLoading=!1}),400);case 5:case"end":return t.stop()}}),t)})))()},downloadPayslip:function(n){var t=this;return Object(o["a"])(Object(s["a"])().mark((function e(){var a,r,o;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return t.$axios.defaults.headers["Authorization"]=t.getToken,e.next=6,t.$axios.post("".concat(t.$api,"download-payslip/").concat(t.$route.params.id,"/").concat(n),null,{responseType:"blob"});case 6:return a=e.sent,r=URL.createObjectURL(new Blob([a.data],{type:"application/pdf"})),o=window.document.createElement("a"),o.href=r,o.setAttribute("download","Payslip-Preview.pdf"),window.document.body.appendChild(o),o.click(),e.next=15,t.$store.dispatch("completed");case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e["catch"](0),new Error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},bulkSend:function(){this.modal="confirm"},CloseModal:function(){this.modal="",this.bulkSending=!0,this.sending=!0}}},v=h,P=(e("1a40"),Object(m["a"])(v,a,r,!1,null,"61cae07d",null));t["default"]=P.exports},"4ea8":function(n,t,e){"use strict";e("5de2")},"5d8b":function(n,t,e){"use strict";e.d(t,"d",(function(){return _})),e.d(t,"f",(function(){return $})),e.d(t,"g",(function(){return S})),e.d(t,"e",(function(){return B})),e.d(t,"b",(function(){return E})),e.d(t,"j",(function(){return D})),e.d(t,"h",(function(){return T})),e.d(t,"i",(function(){return A})),e.d(t,"a",(function(){return N})),e.d(t,"c",(function(){return q}));var a,r,s,o,c,i,u,l,d,p,m=e("c7eb"),y=e("1da1"),f=(e("d3b7"),e("47b6")),b=e("8785"),h=e("5184"),v=Object(h["a"])(a||(a=Object(b["a"])(["\n\n{\n  getIncompleteEmps {\n    employeesCount\n    employees {\n      _id\n            image {\n                src\n            }\n            employeeCode\n            firstName\n            lastName\n            dateOfBirth\n            contactName\n            idCardOrPassport\n            email\n            ssoId\n            isSso\n\n            emergencyContact {\n                fullName\n                contactNumber\n                relationshipId\n            }\n            bankAccount {\n                bankId\n                accountName\n                accountNumber\n            }\n            position\n            department\n\n            isExpat\n            isCompleted\n    }\n  }\n}\n\n"]))),P=Object(h["a"])(r||(r=Object(b["a"])(["\n\n    {\n        getPayrollByMonths {\n            monthlyPaymentId\n            isApproved\n            paymentDate\n            totalSalary\n            totalTax\n            totalSso\n            employeeCount\n            workGroupId {\n                _id\n                name\n                employeesCount\n            }\n        }\n    }\n\n\n"]))),w=Object(h["a"])(s||(s=Object(b["a"])(["\n\nquery (\n  $monthlyPaymentId: ID!\n) {\n  getTotalPayroll(\n    \n    monthlyPaymentId: $monthlyPaymentId\n  ) {\n    totalDeductible\n    totalPayroll\n    totalOT\n    totalBasicSalary\n\n    paymentDate\n  }\n}\n\n"]))),O=Object(h["a"])(o||(o=Object(b["a"])(["\n\nquery ($monthlyPaymentId: ID!) {\n        getPayrollByEmps(monthlyPaymentId: $monthlyPaymentId) {\n            hasExpat\n            employeeWage {\n              tax\n              ssoPaidByEmp\n              totalEarning\n              totalDeduction\n              netPay\n            }\n            totalPayrollCost {\n              netPay\n              ssoPaidByCom\n              totalPayrollCost\n            }\n            paymentSummary {\n              netPay\n              tax\n              totalSso\n            }\n            employees {\n                employeeId\n                employeeCode\n\n                mobile\n                email\n\n                bankAccount {\n                  bankName\n                  accountName\n                  accountNumber\n                }\n    \n              \n                fullName\n                fullNameLao\n              \n                position\n                department\n              \n      \n\n                earningBeforeTax\n                earningAfterTax\n                earningBeforeSso\n                earningAfterSso\n\n                deductionBeforeTax\n                deductionAfterTax\n                deductionBeforeSso\n                deductionAfterSso\n\n\n                calcDeductible\n                deductibleBeforeTax\n                deductibleAfterTax\n              \n              \n                basicSalary              \n                salaryGrade\n                startWorkingDate\n                defaultWorkingDay\n                actualWorkingDay\n                thisMonthSalary\n                isExpat\n\n                OTHours\n                OTAmount\n                earnings\n                deductions\n\n\n                totalOTAmount\n                totalDueAsTax\n              \n                ssoPaidByCom\n                ssoPaidByEmp\n                calcSso\n                tax\n                customFormulas {\n                    key\n                    value\n                   # isFinalNetPay\n                }\n                customFields {\n                    key\n                    value\n         \n                }\n              finalNetPay\n\n              isRequestSent\n              isPayslipSent\n            }\n            date\n            isApproved\n            isRequestSent\n            isRequestApproved\n            isPayslipSent\n          \n            isCalculated\n            \n\n        }\n    }\n\n\n\n\n"]))),x=Object(h["a"])(c||(c=Object(b["a"])(["\n\nmutation (\n        $monthlyPaymentId: ID!\n        $status: String\n    ) {\n        calcPayroll (\n            monthlyPaymentId: $monthlyPaymentId\n            status: $status\n        )\n    }\n\n"]))),j=Object(h["a"])(i||(i=Object(b["a"])(["\n\n    mutation (\n        $monthlyPaymentId: ID!\n    ) {\n        sendRequestCalc(\n            monthlyPaymentId: $monthlyPaymentId\n        )\n    }\n\n"]))),k=Object(h["a"])(u||(u=Object(b["a"])(["\n\n  mutation (\n    $monthlyPaymentId: ID!\n    $employeeIds: [ID!]!\n  ) {\n    sendPayslipByEmps(\n      monthlyPaymentId: $monthlyPaymentId\n      employeeIds: $employeeIds\n    )\n  }\n\n"]))),g=Object(h["a"])(l||(l=Object(b["a"])(["\n\n    mutation (\n        $monthlyPaymentId: ID!\n    ) {\n        sendPayslip(\n            monthlyPaymentId: $monthlyPaymentId\n        )\n    }\n\n"]))),I=Object(h["a"])(d||(d=Object(b["a"])(["\n\nmutation (\n  $workGroupId: ID!\n) {\n  addPayroll(\n    workGroupId: $workGroupId\n  )\n}\n\n"]))),C=Object(h["a"])(p||(p=Object(b["a"])(["\n\nmutation (\n  $monthlyPaymentId: ID!\n) {\n  deletePayroll(\n    monthlyPaymentId: $monthlyPaymentId\n  )\n}\n\n"]))),_=function(){return new Promise(function(){var n=Object(y["a"])(Object(m["a"])().mark((function n(t,e){var a;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].query({query:v});case 3:a=n.sent,t(a.data.getIncompleteEmps),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(t,e){return n.apply(this,arguments)}}())},$=function(){return new Promise(function(){var n=Object(y["a"])(Object(m["a"])().mark((function n(t,e){var a;return Object(m["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f["a"].query({query:P});case 3:a=n.sent,t(a.data.getPayrollByMonths),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(t,e){return n.apply(this,arguments)}}())},S=function(n){return new Promise(function(){var t=Object(y["a"])(Object(m["a"])().mark((function t(e,a){var r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].query({query:w,variables:{monthlyPaymentId:n}});case 3:r=t.sent,e(r.data.getTotalPayroll),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}())},B=function(n){return new Promise(function(){var t=Object(y["a"])(Object(m["a"])().mark((function t(e,a){var r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].query({query:O,variables:{monthlyPaymentId:n}});case 3:r=t.sent,e(r.data.getPayrollByEmps),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}())},E=function(n,t){return new Promise(function(){var e=Object(y["a"])(Object(m["a"])().mark((function e(a,r){var s;return Object(m["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f["a"].mutate({mutation:x,variables:{monthlyPaymentId:n,status:t}});case 3:s=e.sent,a(s.data.calcPayroll),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}())},D=function(n){return new Promise(function(){var t=Object(y["a"])(Object(m["a"])().mark((function t(e,a){var r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].mutate({mutation:j,variables:{monthlyPaymentId:n}});case 3:r=t.sent,e(r.data.sendRequestCalc),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}())},T=function(n){return new Promise(function(){var t=Object(y["a"])(Object(m["a"])().mark((function t(e,a){var r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].mutate({mutation:g,variables:{monthlyPaymentId:n}});case 3:r=t.sent,e(r.data.sendPayslip),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}())},A=function(n){return new Promise(function(){var t=Object(y["a"])(Object(m["a"])().mark((function t(e,a){var r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].mutate({mutation:k,variables:n});case 3:r=t.sent,e(r.data.sendPayslipByEmps),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}())},N=function(n){return new Promise(function(){var t=Object(y["a"])(Object(m["a"])().mark((function t(e,a){var r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].mutate({mutation:I,variables:{workGroupId:n}});case 3:r=t.sent,e(r.data.addPayroll),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}())},q=function(n){return new Promise(function(){var t=Object(y["a"])(Object(m["a"])().mark((function t(e,a){var r;return Object(m["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].mutate({mutation:C,variables:{monthlyPaymentId:n}});case 3:r=t.sent,e(r.data.deletePayroll),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n,e){return t.apply(this,arguments)}}())}},"5de2":function(n,t,e){},ab43:function(n,t,e){"use strict";var a=e("23e7"),r=e("d024"),s=e("c430");a({target:"Iterator",proto:!0,real:!0,forced:s},{map:r})},d024:function(n,t,e){"use strict";var a=e("c65b"),r=e("59ed"),s=e("825a"),o=e("46c4"),c=e("c5cc"),i=e("9bdd"),u=c((function(){var n=this.iterator,t=s(a(this.next,n)),e=this.done=!!t.done;if(!e)return i(n,this.mapper,[t.value,this.counter++],!0)}));n.exports=function(n){return s(this),r(n),new u(o(this),{mapper:n})}},d81d:function(n,t,e){"use strict";var a=e("23e7"),r=e("b727").map,s=e("1dde"),o=s("map");a({target:"Array",proto:!0,forced:!o},{map:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}})},fc30:function(n,t,e){}}]);
//# sourceMappingURL=payslip.483d8442.js.map