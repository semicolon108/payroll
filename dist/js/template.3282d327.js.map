{"version":3,"sources":["webpack:///./src/views/DocumentTemplate.vue?3344","webpack:///./src/views/DocumentTemplate.vue","webpack:///./src/graphql/PayslipTemplate.js","webpack:///./src/apis/payslip-template-api.js","webpack:///src/views/DocumentTemplate.vue","webpack:///./src/views/DocumentTemplate.vue?0399","webpack:///./src/views/DocumentTemplate.vue?801b"],"names":["render","_vm","this","_c","_self","staticClass","_m","_v","on","$event","$refs","fileInput","click","payslipTemplate","_id","_s","_f","payslip","size","_e","attrs","src","ref","onFileChange","staticRenderFns","GET_PAYSLIP_TEMPLATE","gql","_templateObject","_taggedTemplateLiteral","ADD_OR_UPDATE_PAYSLIP_TEMPLATE","_templateObject2","getPayslipTemplateApi","Promise","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resolve","reject","res","wrap","_context","prev","next","apolloClient","query","sent","data","getPayslipTemplate","t0","stop","_x","_x2","apply","arguments","addOrUpdatePayslipTemplateApi","form","_ref2","_callee2","_context2","mutate","mutation","variables","addOrUpdatePayslipTemplate","_x3","_x4","isDefault","isLoading","file","isExistTemplate","created","methods","setDefault","bool","_this","_this2","uploadImage","_this3","_callee3","formData","_context3","FormData","append","$axios","post","Error","_this4","_callee4","extension","_context4","target","files","name","split","pop","alert","component"],"mappings":"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","file":"js/template.3282d327.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentTemplate.vue?vue&type=style&index=0&id=3df39359&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-container\"},[_vm._m(0),_c('div',{staticClass:\"page-content\"},[_c('div',{staticClass:\"box\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"Paylip Template\")]),_c('div',{staticClass:\"buttons\"},[_c('button',{staticClass:\"button grey\",on:{\"click\":function($event){return _vm.$refs.fileInput.click()}}},[_vm._v(\" Upload template \")]),(_vm.payslipTemplate._id)?_c('p',{staticClass:\"text-xs mt-1 text-green-400\"},[_vm._v(\" File size: (\"+_vm._s(_vm._f(\"fileSize\")(_vm.payslipTemplate.payslip.size))+\") \")]):_vm._e()]),(_vm.payslipTemplate.payslip)?_c('a',{staticClass:\"download\",attrs:{\"download\":\"\",\"href\":_vm.payslipTemplate.payslip.src}},[_c('i',{staticClass:\"fal fa-file-word\"})]):_vm._e()]),_c('input',{ref:\"fileInput\",staticClass:\"is-hidden\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileChange}})])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('div',{staticClass:\"header-start\"},[_c('h3',{staticClass:\"page-title\"},[_vm._v(\"Payslip Template\")])]),_c('div',{staticClass:\"header-end\"},[_c('a',{staticClass:\"button primary\",attrs:{\"download\":\"\",\"href\":\"https://paytoday-bucket.s3-ap-southeast-1.amazonaws.com/payslip-templates/DefaultTemplate.docx\"}},[_c('i',{staticClass:\"fal fa-file-word\"}),_vm._v(\" Sample Template \")])])])\n}]\n\nexport { render, staticRenderFns }","import gql from 'graphql-tag'\r\n\r\nexport const GET_PAYSLIP_TEMPLATE = gql`\r\n\r\n{\r\n  getPayslipTemplate {\r\n    _id\r\n    payslip {\r\n      link\r\n      src\r\n      size\r\n    }\r\n    isDefault\r\n  }\r\n}\r\n\r\n`\r\n\r\nexport const ADD_OR_UPDATE_PAYSLIP_TEMPLATE = gql`\r\n\r\nmutation (\r\n  $fileInput: AddFileInput\r\n  $isDefault: Boolean!\r\n) {\r\n  addOrUpdatePayslipTemplate(fileInput: $fileInput isDefault: $isDefault)\r\n}\r\n\r\n`","import { apolloClient } from \"@/services/apollo-client\";\r\nimport { GET_PAYSLIP_TEMPLATE, ADD_OR_UPDATE_PAYSLIP_TEMPLATE } from \"@/graphql/PayslipTemplate\";\r\n\r\n\r\nexport const getPayslipTemplateApi = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            const res = await apolloClient.query({\r\n                query: GET_PAYSLIP_TEMPLATE\r\n            })\r\n            resolve(res.data.getPayslipTemplate)\r\n        } catch (err) {\r\n            reject(err)\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\nexport const addOrUpdatePayslipTemplateApi = (form) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            const res = await apolloClient.mutate({\r\n                mutation: ADD_OR_UPDATE_PAYSLIP_TEMPLATE,\r\n                variables: form\r\n            })\r\n            resolve(res.data.addOrUpdatePayslipTemplate)\r\n        } catch (err) {\r\n            reject(err)\r\n        }\r\n    })\r\n}","<template>\r\n  <div class=\"page-container\">\r\n    <div class=\"page-header\">\r\n      <div class=\"header-start\">\r\n        <h3 class=\"page-title\">Payslip Template</h3>\r\n      </div>\r\n      <div class=\"header-end\">\r\n        <a\r\n          class=\"button primary\"\r\n          download\r\n          href=\"https://paytoday-bucket.s3-ap-southeast-1.amazonaws.com/payslip-templates/DefaultTemplate.docx\"\r\n        >\r\n          <i class=\"fal fa-file-word\"></i>\r\n          Sample Template\r\n        </a>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page-content\">\r\n      <!-- Box -->\r\n      <div class=\"box\">\r\n        <h3 class=\"title\">Paylip Template</h3>\r\n        <div class=\"buttons\">\r\n          <button @click=\"$refs.fileInput.click()\" class=\"button grey\">\r\n            Upload template\r\n          </button>\r\n          <p v-if=\"payslipTemplate._id\" class=\"text-xs mt-1 text-green-400\">\r\n            File size: ({{ payslipTemplate.payslip.size | fileSize }})\r\n          </p>\r\n        </div>\r\n        <a\r\n          class=\"download\"\r\n          v-if=\"payslipTemplate.payslip\"\r\n          download\r\n          :href=\"payslipTemplate.payslip.src\"\r\n        >\r\n          <i class=\"fal fa-file-word\"></i>\r\n        </a>\r\n      </div>\r\n      <!-- Box -->\r\n\r\n      <input\r\n        ref=\"fileInput\"\r\n        @change=\"onFileChange\"\r\n        type=\"file\"\r\n        class=\"is-hidden\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getPayslipTemplateApi,\r\n  addOrUpdatePayslipTemplateApi,\r\n} from \"@/apis/payslip-template-api\";\r\nexport default {\r\n  data: () => ({\r\n    payslipTemplate: {\r\n      isDefault: false,\r\n      isLoading: true\r\n    },\r\n    file: null,\r\n    isExistTemplate: false\r\n  \r\n  }),\r\n  created() {\r\n    this.getPayslipTemplate();\r\n  },\r\n  methods: {\r\n    setDefault(bool) {\r\n      this.payslipTemplate.isDefault = bool;\r\n      this.addOrUpdatePayslipTemplate();\r\n    },\r\n    async getPayslipTemplate() {\r\n      const payslipTemplate = await getPayslipTemplateApi();\r\n      this.isLoading = false\r\n      if (payslipTemplate) {\r\n        this.payslipTemplate = payslipTemplate\r\n        this.isExistTemplate = true\r\n      }\r\n    },\r\n    async addOrUpdatePayslipTemplate() {\r\n      const form = {\r\n        isDefault: this.payslipTemplate.isDefault,\r\n      };\r\n      if (this.file) form.fileInput = this.file;\r\n\r\n      await addOrUpdatePayslipTemplateApi(form);\r\n      this.getPayslipTemplate();\r\n    },\r\n\r\n    async uploadImage(file) {\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append(\"imageFile\", file);\r\n        const res = await this.$axios.post(\"upload-document\", formData);\r\n        this.file = res.data.file;\r\n        this.addOrUpdatePayslipTemplate();\r\n      } catch (err) {\r\n        throw new Error(err);\r\n      }\r\n    },\r\n    async onFileChange($event) {\r\n      const file = $event.target.files[0];\r\n      const extension = file.name.split(\".\").pop();\r\n      if (extension === \"docx\") {\r\n        await this.uploadImage(file);\r\n      } else {\r\n        alert(\"Only Support DOCX Extension\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.box {\r\n  padding: 30px;\r\n  position: relative;\r\n  transition: ease 0.2s;\r\n}\r\n.title {\r\n  @include lg-font;\r\n  font-weight: 700;\r\n  margin-bottom: 15px;\r\n  color: $primary-color;\r\n}\r\n.buttons {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 0;\r\n  .button {\r\n    margin-right: 5px;\r\n    margin-bottom: 0;\r\n    @include md-font;\r\n  }\r\n  p {\r\n    color: $alert-color;\r\n  }\r\n}\r\n\r\n.download {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  background-color: $light-grey-color;\r\n  @include md-font;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  &:hover {\r\n    background-color: $primary-color;\r\n    i {\r\n      color: #fff;\r\n    }\r\n  }\r\n  i {\r\n    color: $primary-color;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentTemplate.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentTemplate.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DocumentTemplate.vue?vue&type=template&id=3df39359&scoped=true\"\nimport script from \"./DocumentTemplate.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentTemplate.vue?vue&type=script&lang=js\"\nimport style0 from \"./DocumentTemplate.vue?vue&type=style&index=0&id=3df39359&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3df39359\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}