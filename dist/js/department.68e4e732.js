(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["department"],{"083a":function(t,e,a){"use strict";var n=a("0d51"),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw new r("Cannot delete property "+n(e)+" of "+n(t))}},"0b40":function(t,e,a){},"612e":function(t,e,a){"use strict";a("0b40")},"6f15":function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-container"},[e("div",{staticClass:"page-header border-bottom"},[e("div",{staticClass:"header-start"},[e("h3",{staticClass:"page-title"},[t._v("Department")]),e("button",{staticClass:"button primary",on:{click:function(e){t.isOpen=!0,t.isEditMode=!1}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add ")])])]),e("div",{staticClass:"page-content"},[t.isLoading?e("div",t._l(7,(function(t){return e("Loading",{key:t,staticClass:"mb-3",staticStyle:{height:"60px"}})})),1):e("table",{staticClass:"table is-fullwidth",attrs:{id:"my-table"}},[t._m(0),e("tbody",t._l(t.departments,(function(a,n){return e("tr",{key:n},[e("td",{staticClass:"truncate",staticStyle:{"max-width":"180px"}},[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.employeesCount))]),e("td",[e("div",{staticClass:"icons"},[e("span",{staticClass:"icon hover-primary",on:{click:function(e){return t.editModal(a._id,a.name)}}},[e("i",{staticClass:"fas fa-pen"})]),e("span",{staticClass:"icon alert hover-alert",on:{click:function(e){return t.deleteDepartment(a._id)}}},[e("i",{staticClass:"fas fa-trash"})])])])])})),0)])]),t.isOpen?e("AddDepartment",{ref:"Modal",attrs:{isEditMode:t.isEditMode},on:{CloseModal:function(e){t.isOpen=!1},PushItem:t.getDepartments,UpdateItem:t.getDepartments}}):t._e()],1)},r=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"sticky"},[e("th",[t._v("Department")]),e("th",[t._v("Total Employee")]),e("th",{staticClass:"is-xs is-right"},[t._v("Option")])])])}],s=a("c7eb"),i=a("1da1"),o=(a("d9e2"),a("c740"),a("d81d"),a("a434"),a("e9f5"),a("ab43"),a("d3b7"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal is-active"},[e("div",{staticClass:"modal-background",on:{click:t.CloseModal}}),e("div",{staticClass:"modal-card slide-down"},[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var n=a.handleSubmit;return[e("header",{staticClass:"modal-card-head"},[e("h3",[t._v(t._s(t.isEditMode?"Edit Department":"Add Department"))]),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.CloseModal}})]),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label",attrs:{for:""}},[t._v("Department Name")]),e("div",{staticClass:"control"},[e("ValidationProvider",{attrs:{name:"Department Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("p",{staticClass:"has-text-danger"},[t._v(t._s(n[0]))])]}}],null,!0)})],1)])]),e("footer",{staticClass:"modal-card-foot"},[t.isEditMode?e("button",{staticClass:"button save-file primary",on:{click:function(e){return n(t.updateDepartment)}}},[t._v(" Update ")]):e("button",{staticClass:"button primary",on:{click:function(e){return n(t.addDepartment)}}},[t._v(" Save ")])])]}}])})],1)])}),c=[],d=a("d42b"),l={props:["isEditMode"],data:function(){return{_id:"",name:""}},methods:{CloseModal:function(){this.$emit("CloseModal")},addDepartment:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return e.next=5,t.$apollo.mutate({mutation:d["a"],variables:{name:t.name}});case 5:return a=e.sent,n=a.data.addDepartment,e.next=9,t.$store.dispatch("completed");case 9:t.$emit("PushItem",n),t.$emit("CloseModal"),e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](0),e.next=17,t.$store.dispatch("error");case 17:throw new Error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()},updateDepartment:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return e.next=5,t.$apollo.mutate({mutation:d["d"],variables:{departmentId:t._id,name:t.name}});case 5:if(a=e.sent,n=a.data.updateDepartment,!n){e.next=12;break}return e.next=10,t.$store.dispatch("completed");case 10:t.$emit("UpdateItem",n),t.$emit("CloseModal");case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e["catch"](0),e.next=18,t.$store.dispatch("error");case 18:throw new Error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))()}}},u=l,p=a("2877"),m=Object(p["a"])(u,o,c,!1,null,"e7bad424",null),f=m.exports,h=a("d8c2"),v={components:{AddDepartment:f,Loading:h["a"]},data:function(){return{ModalClick:"",departments:[],isOpen:!1,isEditMode:!1,isLoading:!0}},methods:{getDepartments:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){var a;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.query({query:d["c"]});case 3:a=e.sent,t.departments=a.data.getDepartments,setTimeout((function(){t.isLoading=!1}),400),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},deleteDepartment:function(t){var e=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var n,r,i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$store.dispatch("loading");case 3:return a.next=5,e.$apollo.mutate({mutation:d["b"],variables:{departmentId:t}});case 5:if(n=a.sent,r=n.data.deleteDepartment,"Deleted"!==r){a.next=12;break}return a.next=10,e.$store.dispatch("completed");case 10:i=e.departments.findIndex((function(e){return e._id===t})),e.departments.splice(i,1);case 12:a.next=19;break;case 14:return a.prev=14,a.t0=a["catch"](0),a.next=18,e.$store.dispatch("error");case 18:"You need to delete this positions first"===a.t0.graphQLErrors[0].message&&alert(a.t0.graphQLErrors[0].message+": "+a.t0.graphQLErrors[0].extensions.positionExists.map((function(t){return t.name})));case 19:case"end":return a.stop()}}),a,null,[[0,14]])})))()},editModal:function(t,e){var a=this;this.isOpen=!0,this.isEditMode=!0,this.$nextTick((function(){a.$refs.Modal._id=t,a.$refs.Modal.name=e}))}},created:function(){this.getDepartments()}},b=v,C=(a("612e"),Object(p["a"])(b,n,r,!1,null,"decd745a",null));e["default"]=C.exports},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("7b0b"),s=a("23cb"),i=a("5926"),o=a("07fa"),c=a("3a34"),d=a("3511"),l=a("65f0"),u=a("8418"),p=a("083a"),m=a("1dde"),f=m("splice"),h=Math.max,v=Math.min;n({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var a,n,m,f,b,C,x=r(this),g=o(x),_=s(t,g),w=arguments.length;for(0===w?a=n=0:1===w?(a=0,n=g-_):(a=w-2,n=v(h(i(e),0),g-_)),d(g+a-n),m=l(x,n),f=0;f<n;f++)b=_+f,b in x&&u(m,f,x[b]);if(m.length=n,a<n){for(f=_;f<g-n;f++)b=f+n,C=f+a,b in x?x[C]=x[b]:p(x,C);for(f=g;f>g-n+a;f--)p(x,f-1)}else if(a>n)for(f=g-n;f>_;f--)b=f+n-1,C=f+a-1,b in x?x[C]=x[b]:p(x,C);for(f=0;f<a;f++)x[f+_]=arguments[f+2];return c(x,g-n+a),m}})},c740:function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").findIndex,s=a("44d2"),i="findIndex",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(i)},d42b:function(t,e,a){"use strict";a.d(e,"c",(function(){return d})),a.d(e,"a",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"b",(function(){return p}));var n,r,s,i,o=a("8785"),c=a("5184"),d=Object(c["a"])(n||(n=Object(o["a"])(["\n\n    {\n        getDepartments {\n            _id\n            name\n            employeesCount\n        }\n    }\n\n"]))),l=Object(c["a"])(r||(r=Object(o["a"])(["\n\n    mutation (\n        $name: String!\n    ) {\n        addDepartment(name: $name) {\n            _id\n            name\n        }\n    }\n\n"]))),u=Object(c["a"])(s||(s=Object(o["a"])(["\n\n    mutation (\n        $departmentId: ID!\n        $name: String!\n    ) {\n        updateDepartment(\n            departmentId: $departmentId\n            name: $name\n        ) {\n            _id\n            name\n        }\n    }\n\n"]))),p=Object(c["a"])(i||(i=Object(o["a"])(["\n\n    mutation(\n        $departmentId: ID!\n    ) {\n        deleteDepartment(\n            departmentId: $departmentId\n        )\n    }\n\n"])))}}]);
//# sourceMappingURL=department.68e4e732.js.map