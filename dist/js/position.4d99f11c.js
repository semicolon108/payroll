(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["position"],{2431:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return p}));var a,s,r,i,o=n("8785"),c=n("5184"),d=Object(c["a"])(a||(a=Object(o["a"])(["\n\n    {\n        getPositions {\n            _id\n            name\n            departmentId {\n                _id\n                name\n            }\n            employeesCount\n        }\n    }\n\n"]))),u=Object(c["a"])(s||(s=Object(o["a"])(["\n\n    mutation (\n        $departmentId: ID!\n        $name: String!\n    ) {\n        addPosition(\n            departmentId: $departmentId\n            name: $name\n        ) {\n            _id\n            name\n            departmentId {\n                _id\n                name\n            }\n        }\n    }\n\n"]))),l=Object(c["a"])(r||(r=Object(o["a"])(["\n\n    mutation(\n        $positionId: ID!\n        $name: String!\n        $departmentId: ID!\n    ) {\n        updatePosition(\n            positionId: $positionId\n            name: $name\n            departmentId: $departmentId\n        ) {\n            _id\n            name\n            departmentId {\n                _id\n                name\n            }\n        }\n    }\n\n"]))),p=Object(c["a"])(i||(i=Object(o["a"])(["\n\n    mutation (\n        $positionId: ID!\n    ) {\n        deletePosition(\n            positionId: $positionId\n        )\n    }\n\n"])))},"304f":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));var a=n("c7eb"),s=n("1da1"),r=(n("d3b7"),n("47b6")),i=n("2431"),o=function(){return new Promise(function(){var t=Object(s["a"])(Object(a["a"])().mark((function t(e,n){var s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r["a"].query({query:i["c"]});case 3:s=t.sent,e(s.data.getPositions),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},c=function(t){return new Promise(function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(n,s){var o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r["a"].mutate({mutation:i["b"],variables:{positionId:t}});case 3:o=e.sent,n(o.data.deletePosition),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),s(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())}},"32eb":function(t,e,n){"use strict";n("68b7")},"412a":function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-container"},[e("div",{staticClass:"page-header border-bottom"},[e("div",{staticClass:"header-start"},[e("h3",{staticClass:"page-title"},[t._v("Position")]),e("button",{staticClass:"button primary",on:{click:function(e){t.isOpen=!0,t.isEditMode=!1}}},[e("i",{staticClass:"fas fa-plus"}),t._v("Add ")])])]),e("div",{staticClass:"page-content"},[t.isLoading?e("div",t._l(7,(function(t){return e("Loading",{key:t,staticClass:"mb-3",staticStyle:{height:"60px"}})})),1):e("table",{staticClass:"table is-fullwidth",attrs:{id:"my-table"}},[t._m(0),e("tbody",t._l(t.positions,(function(n,a){return e("tr",{key:a},[e("td",{staticClass:"truncate",staticStyle:{"max-width":"180px"}},[t._v(t._s(n.name))]),e("td",{staticClass:"truncate",staticStyle:{"max-width":"180px"}},[t._v(" "+t._s(n.departmentId.name)+" ")]),e("td",{staticClass:"truncate",staticStyle:{"max-width":"180px"}},[t._v(" "+t._s(n.employeesCount)+" ")]),e("td",[e("div",{staticClass:"icons"},[e("span",{staticClass:"icon hover-primary",on:{click:function(e){return t.editModal(n._id,n.name,n.departmentId._id)}}},[e("i",{staticClass:"fas fa-pen"})]),e("span",{staticClass:"icon alert hover-alert",on:{click:function(e){return t.deletePosition(n._id)}}},[e("i",{staticClass:"fas fa-trash"})])])])])})),0)])]),t.isOpen?e("PositionModal",{ref:"Modal",attrs:{isEditMode:t.isEditMode},on:{PushItem:t.getPositions,UpdateItem:t.getPositions,CloseModal:function(e){t.isOpen=!1}}}):t._e()],1)},s=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"sticky"},[e("th",[t._v("Position")]),e("th",[t._v("Department")]),e("th",[t._v("Total Employee")]),e("th",{staticClass:"is-xs is-right"},[t._v("Option")])])])}],r=n("c7eb"),i=n("1da1"),o=(n("d9e2"),n("d81d"),n("e9f5"),n("ab43"),n("d3b7"),n("4de4"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal is-active"},[e("div",{staticClass:"modal-background",on:{click:t.CloseModal}}),e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.handleSubmit;return[e("div",{staticClass:"modal-card slide-down"},[e("div",{staticClass:"modal-card-head"},[e("h3",[t._v(t._s(t.isEditMode?"Edit Position":"Add Position"))]),e("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.CloseModal}})]),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label",attrs:{for:""}},[t._v("Position")]),e("div",{staticClass:"control"},[e("ValidationProvider",{attrs:{name:"Position",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter position name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("p",{staticClass:"has-text-danger"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"field"},[e("label",{staticClass:"label",attrs:{for:""}},[t._v("Select Department")]),e("div",{staticClass:"control"},[e("div",{staticClass:"select"},[e("ValidationProvider",{attrs:{name:"Department",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.errors;return[e("select",{directives:[{name:"model",rawName:"v-model",value:t.departmentId,expression:"departmentId"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.departmentId=e.target.multiple?n:n[0]}}},t._l(t.departments,(function(n){return e("option",{key:n._id,domProps:{value:n._id}},[t._v(" "+t._s(n.name)+" ")])})),0),e("p",{staticClass:"has-text-danger"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)])])]),e("div",{staticClass:"modal-card-foot"},[t.isEditMode?e("button",{staticClass:"button primary",on:{click:function(e){return a(t.updatePosition)}}},[t._v(" Update ")]):e("button",{staticClass:"button primary",on:{click:function(e){return a(t.addPosition)}}},[t._v(" Save ")])])])]}}])})],1)}),c=[],d=n("d42b"),u=n("2431"),l={props:["isEditMode"],data:function(){return{departments:[],departmentId:""}},methods:{CloseModal:function(){this.$emit("CloseModal")},getDepartments:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.query({query:d["c"]});case 3:n=e.sent,t.departments=n.data.getDepartments,t.departmentId=t.departments[0]._id,e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},addPosition:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return e.next=5,t.$apollo.mutate({mutation:u["a"],variables:{departmentId:t.departmentId,name:t.name}});case 5:if(n=e.sent,a=n.data.addPosition,!a){e.next=12;break}return e.next=10,t.$store.dispatch("completed");case 10:t.$emit("PushItem",a),t.$emit("CloseModal");case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e["catch"](0),e.next=18,t.$store.dispatch("error");case 18:throw new Error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))()},updatePosition:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loading");case 3:return e.next=5,t.$apollo.mutate({mutation:u["d"],variables:{positionId:t._id,name:t.name,departmentId:t.departmentId}});case 5:return n=e.sent,a=n.data.updatePosition,e.next=9,t.$store.dispatch("completed");case 9:t.$emit("CloseModal"),t.$emit("UpdateItem",a),e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](0),e.next=17,t.$store.dispatch("error");case 17:throw new Error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()}},created:function(){this.getDepartments()}},p=l,m=n("2877"),f=Object(m["a"])(p,o,c,!1,null,"84d8638e",null),v=f.exports,b=n("304f"),h=n("d8c2"),_={components:{PositionModal:v,Loading:h["a"]},data:function(){return{ModalClick:"",positions:[],isOpen:!1,isEditMode:!1,isLoading:!0}},methods:{getPositions:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.query({query:u["c"]});case 3:n=e.sent,t.positions=n.data.getPositions,setTimeout((function(){t.isLoading=!1}),400),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},editModal:function(t,e,n){var a=this;this.isOpen=!0,this.isEditMode=!0,this.$nextTick((function(){a.$refs.Modal._id=t,a.$refs.Modal.name=e,a.$refs.Modal.departmentId=n}))},deletePosition:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("loading");case 3:return n.next=5,Object(b["a"])(t);case 5:return n.next=7,e.$store.dispatch("completed");case 7:return n.next=9,e.getPositions();case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n["catch"](0),n.next=15,e.$store.dispatch("error");case 15:"Please unselected employees from this position first"===n.t0.graphQLErrors[0].message&&alert(n.t0.graphQLErrors[0].message+": "+n.t0.graphQLErrors[0].extensions.isExists.map((function(t){return t.employeeId.employeeCode})));case 16:case"end":return n.stop()}}),n,null,[[0,11]])})))()}},created:function(){this.getPositions()}},x=_,C=(n("32eb"),Object(m["a"])(x,a,s,!1,null,"653824ef",null));e["default"]=C.exports},"68b7":function(t,e,n){},d42b:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return p}));var a,s,r,i,o=n("8785"),c=n("5184"),d=Object(c["a"])(a||(a=Object(o["a"])(["\n\n    {\n        getDepartments {\n            _id\n            name\n            employeesCount\n        }\n    }\n\n"]))),u=Object(c["a"])(s||(s=Object(o["a"])(["\n\n    mutation (\n        $name: String!\n    ) {\n        addDepartment(name: $name) {\n            _id\n            name\n        }\n    }\n\n"]))),l=Object(c["a"])(r||(r=Object(o["a"])(["\n\n    mutation (\n        $departmentId: ID!\n        $name: String!\n    ) {\n        updateDepartment(\n            departmentId: $departmentId\n            name: $name\n        ) {\n            _id\n            name\n        }\n    }\n\n"]))),p=Object(c["a"])(i||(i=Object(o["a"])(["\n\n    mutation(\n        $departmentId: ID!\n    ) {\n        deleteDepartment(\n            departmentId: $departmentId\n        )\n    }\n\n"])))}}]);
//# sourceMappingURL=position.4d99f11c.js.map